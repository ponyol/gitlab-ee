<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üìÑ administration/geo/disaster_recovery/failover_troubleshooting.md</title>
    <link rel="stylesheet" href="/style.css">
</head>
<body>
    <pre><code><h3>1. –ó–∞—á–µ–º —ç—Ç–æ –Ω—É–∂–Ω–æ</h3>
<p>–≠—Ç–æ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ–º–æ–≥–∞–µ—Ç –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Ä–∞–±–æ—Ç—É GitLab Geo –ø–æ—Å–ª–µ —Å–±–æ—è –∏–ª–∏ –Ω–µ–ø–æ–ª–Ω–æ–≥–æ –ø–µ—Ä–µ—Ö–æ–¥–∞ –Ω–∞ –Ω–æ–≤—ã–π –ø–µ—Ä–≤–∏—á–Ω—ã–π —Å–∞–π—Ç (failover). –û–Ω–æ –æ–ø–∏—Å—ã–≤–∞–µ—Ç —Ç–∏–ø–∏—á–Ω—ã–µ –æ—à–∏–±–∫–∏ –∏ —à–∞–≥–∏ –¥–ª—è –∏—Ö —É—Å—Ç—Ä–∞–Ω–µ–Ω–∏—è, –æ–±–µ—Å–ø–µ—á–∏–≤–∞—è –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–µ –≤—Ä–µ–º—è –ø—Ä–æ—Å—Ç–æ—è –∏ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—É—é —Ä–∞–±–æ—Ç—É –≥–µ–æ—Ä–∞—Å–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω–æ–π –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã.</p>
<h3>2. –û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏</h3>
<ul>
<li>–£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –æ—à–∏–±–æ–∫ –ø—Ä–∏ –ø–µ—Ä–µ—Ö–æ–¥–µ –≤—Ç–æ—Ä–∏—á–Ω–æ–≥–æ —Å–∞–π—Ç–∞ –≤ –ø–µ—Ä–≤–∏—á–Ω—ã–π (–Ω–∞–ø—Ä–∏–º–µ—Ä, <code>ActiveRecord::RecordInvalid</code> –∏–ª–∏ <code>NoMethodError</code>)  </li>
<li>–†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º —Å –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–∞–º–∏, –∫–æ—Ç–æ—Ä—ã–µ –º–æ–≥—É—Ç –±—ã—Ç—å –±–æ–ª—å—à–µ –Ω–∞ –≤—Ç–æ—Ä–∏—á–Ω–æ–º —Å–∞–π—Ç–µ  </li>
<li>–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—à–∏–±–æ–∫ –≤—Ö–æ–¥–∞ –≤ —Å–∏—Å—Ç–µ–º—É, —Ç–∞–∫–∏—Ö –∫–∞–∫ –Ω–µ–≤–∞–ª–∏–¥–Ω—ã–π redirect URI  </li>
<li>–†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º —Å SAML –ø—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ –¥–æ –≤–µ—Ä—Å–∏–∏ 15.1  </li>
<li>–í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–æ—Å–ª–µ —á–∞—Å—Ç–∏—á–Ω–æ–≥–æ failover —á–µ—Ä–µ–∑ –ø–æ–≤—Ç–æ—Ä–Ω—ã–π –∑–∞–ø—É—Å–∫ –∫–æ–º–∞–Ω–¥—ã –∏–ª–∏ —Ä—É—á–Ω—É—é –Ω–∞—Å—Ç—Ä–æ–π–∫—É –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏  </li>
</ul>
<h3>3. –í–∞–∂–Ω—ã–µ –Ω—é–∞–Ω—Å—ã</h3>
<ul>
<li>–¢—Ä–µ–±—É–µ—Ç—Å—è –ª–∏—Ü–µ–Ω–∑–∏—è <strong>Premium</strong> –∏–ª–∏ <strong>Ultimate</strong>  </li>
<li>–û–ø–µ—Ä–∞—Ü–∏–∏ –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –Ω–∞ –≤—Ç–æ—Ä–∏—á–Ω–æ–º —Å–∞–π—Ç–µ –ø—Ä–∏ –ø–µ—Ä–µ—Ö–æ–¥–µ –≤ –ø–µ—Ä–≤–∏—á–Ω—ã–π  </li>
<li>–î–ª—è –Ω–µ–∫–æ—Ç–æ—Ä—ã—Ö –¥–µ–π—Å—Ç–≤–∏–π —Ç—Ä–µ–±—É–µ—Ç—Å—è –¥–æ—Å—Ç—É–ø –∫ <strong>Rails console</strong> –∏–ª–∏ —Ä—É—á–Ω–∞—è –ø—Ä–∞–≤–∫–∞ —Ñ–∞–π–ª–æ–≤ (<code>/etc/gitlab/gitlab-cluster.json</code>)  </li>
<li>–ü—Ä–∏ —á–∞—Å—Ç–∏—á–Ω–æ–º failover –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ñ–ª–∞–≥ <code>--force</code> –¥–ª—è –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ–≥–æ –ø–µ—Ä–µ—Ö–æ–¥–∞  </li>
<li>–í–∞–∂–Ω–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ URL –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö Geo –∏ –∑–Ω–∞—á–µ–Ω–∏—é <code>external_url</code> –≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ —Å–∞–π—Ç–∞</li>
</ul>
<hr /></code></pre>
</body>
</html>
