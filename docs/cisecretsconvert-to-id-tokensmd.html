<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üìÑ ci/secrets/convert-to-id-tokens.md</title>
    <link rel="stylesheet" href="/style.css">
</head>
<body>
    <pre><code><p><strong>1. –ó–∞—á–µ–º —ç—Ç–æ –Ω—É–∂–Ω–æ</strong><br />
–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å HashiCorp Vault –¥–ª—è –ø–µ—Ä–µ—Ö–æ–¥–∞ –æ—Ç —É—Å—Ç–∞—Ä–µ–≤—à–µ–π –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π <code>CI_JOB_JWT</code> –∫ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–º ID —Ç–æ–∫–µ–Ω–∞–º, —á—Ç–æ –ø–æ–≤—ã—à–∞–µ—Ç –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –∏ —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å –Ω–æ–≤—ã–º–∏ –≤–µ—Ä—Å–∏—è–º–∏ Vault (–Ω–∞—á–∏–Ω–∞—è —Å 1.17), –≥–¥–µ JWT –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è —Ç—Ä–µ–±—É–µ—Ç —É–∫–∞–∑–∞–Ω–∏—è <code>bound_audiences</code>.</p>
<p><strong>2. –û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏</strong><br />
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –ø–µ—Ä–µ—Ö–æ–¥–∞ –Ω–∞ ID —Ç–æ–∫–µ–Ω—ã —Å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º –¥–æ—Å—Ç—É–ø–∞ –∫ —Å–µ–∫—Ä–µ—Ç–∞–º –≤ Vault.<br />
- –î–≤–∞ –ø–æ–¥—Ö–æ–¥–∞ –º–∏–≥—Ä–∞—Ü–∏–∏:<br />
  - <strong>–ú–µ—Ç–æ–¥ A</strong>: –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–≥–æ –ø—É—Ç–∏ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ (<code>jwt_v2</code>) –∏ –ø–µ—Ä–µ—Å–æ–∑–¥–∞–Ω–∏–µ —Ä–æ–ª–µ–π –≤ –Ω–µ–º.<br />
  - <strong>–ú–µ—Ç–æ–¥ B</strong>: –ü–µ—Ä–µ–Ω–æ—Å –ø—Ä–æ–≤–µ—Ä–∫–∏ <code>iss</code> –Ω–∞ —É—Ä–æ–≤–µ–Ω—å —Ä–æ–ª–µ–π, —á—Ç–æ–±—ã —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å –≤ —Ç–µ—á–µ–Ω–∏–µ –ø–µ—Ä–µ—Ö–æ–¥–Ω–æ–≥–æ –ø–µ—Ä–∏–æ–¥–∞.<br />
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Ä–∞–±–æ—Ç—ã —Å —Ä–∞–∑–Ω—ã–º–∏ –≤–µ—Ä—Å–∏—è–º–∏ –¥–≤–∏–∂–∫–æ–≤ —Å–µ–∫—Ä–µ—Ç–æ–≤ Vault (v1 –∏ v2).<br />
- –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ CI/CD Jobs –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è <code>id_tokens:</code> –≤–º–µ—Å—Ç–æ —É—Å—Ç–∞—Ä–µ–≤—à–∏—Ö <code>CI_JOB_JWT</code>.  </p>
<p><strong>3. –í–∞–∂–Ω—ã–µ –Ω—é–∞–Ω—Å—ã</strong><br />
- –¢—Ä–µ–±—É–µ—Ç—Å—è GitLab 16.0 –∏–ª–∏ –≤—ã—à–µ.<br />
- –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è –≤ —Ç–∞—Ä–∏—Ñ–∞—Ö <strong>Premium</strong> –∏ <strong>Ultimate</strong>.<br />
- –¢—Ä–µ–±—É–µ—Ç—Å—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ Vault:<br />
  - –î–ª—è Vault 1.17+ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–∞ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ <code>bound_audiences</code> –≤ —Ä–æ–ª–∏.<br />
  - –í –º–µ—Ç–æ–¥–µ B ‚Äî –≤—Ä–µ–º–µ–Ω–Ω–∞—è –º–∏–≥—Ä–∞—Ü–∏—è <code>iss</code> –Ω–∞ —É—Ä–æ–≤–µ–Ω—å —Ä–æ–ª–µ–π.<br />
- –ü–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –º–∏–≥—Ä–∞—Ü–∏–∏ –º–æ–∂–Ω–æ —É–¥–∞–ª–∏—Ç—å —Å—Ç–∞—Ä—É—é –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é <code>bound_issuer</code> –∏–∑ auth –º–µ—Ç–æ–¥–∞.<br />
- –ù–µ–æ–±—Ö–æ–¥–∏–º–æ –æ–±–Ω–æ–≤–∏—Ç—å CI/CD Jobs —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º <code>id_tokens:</code> –∏ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π –Ω–∞—Å—Ç—Ä–æ–π–∫–æ–π <code>VAULT_AUTH_PATH</code>.</p>
<hr /></code></pre>
</body>
</html>
