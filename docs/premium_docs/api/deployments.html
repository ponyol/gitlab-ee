<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title># List project deployments</title>
    <link rel="stylesheet" href="../style.css">
</head>
<body>
    <pre><code><hr />
<p>stage: Verify
group: Runner Core
info: To determine the technical writer assigned to the Stage/Group associated with this page, see https://handbook.gitlab.com/handbook/product/ux/technical-writing/#assignments
title: Deployments API</p>
<hr />
<p>{{&lt; details &gt;}}</p>
<ul>
<li>Tier: Free, Premium, Ultimate</li>
<li>Offering: GitLab.com, GitLab Self-Managed, GitLab Dedicated</li>
</ul>
<p>{{&lt; /details &gt;}}</p>
<p>{{&lt; history &gt;}}</p>
<ul>
<li>Support for <a href="../ci/jobs/ci_job_token.html">GitLab CI/CD job token</a> authentication <a href="https://gitlab.com/gitlab-org/gitlab/-/issues/414549">introduced</a> in GitLab 16.2.</li>
</ul>
<p>{{&lt; /history &gt;}}</p>
<p>Use this API to interact with <a href="../ci/environments/deployments.html">code deployments</a> to GitLab environments.</p>
<h2>List project deployments</h2>
<p>Get a list of deployments in a project.</p>
<pre><code class="language-plaintext">GET /projects/:id/deployments
</code></pre>
<table>
<thead>
<tr>
<th>Attribute</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>id</code></td>
<td>integer or string</td>
<td>yes</td>
<td>The ID or <a href="rest/_index.md#namespaced-paths">URL-encoded path of the project</a>.</td>
</tr>
<tr>
<td><code>order_by</code></td>
<td>string</td>
<td>no</td>
<td>Return deployments ordered by either one of <code>id</code>, <code>iid</code>, <code>created_at</code>, <code>updated_at</code>, <code>finished_at</code> or <code>ref</code> fields. Default is <code>id</code>.</td>
</tr>
<tr>
<td><code>sort</code></td>
<td>string</td>
<td>no</td>
<td>Return deployments sorted in <code>asc</code> or <code>desc</code> order. Default is <code>asc</code>.</td>
</tr>
<tr>
<td><code>updated_after</code></td>
<td>datetime</td>
<td>no</td>
<td>Return deployments updated after the specified date. Expected in ISO 8601 format (<code>2019-03-15T08:00:00Z</code>).</td>
</tr>
<tr>
<td><code>updated_before</code></td>
<td>datetime</td>
<td>no</td>
<td>Return deployments updated before the specified date. Expected in ISO 8601 format (<code>2019-03-15T08:00:00Z</code>).</td>
</tr>
<tr>
<td><code>finished_after</code></td>
<td>datetime</td>
<td>no</td>
<td>Return deployments finished after the specified date. Expected in ISO 8601 format (<code>2019-03-15T08:00:00Z</code>).</td>
</tr>
<tr>
<td><code>finished_before</code></td>
<td>datetime</td>
<td>no</td>
<td>Return deployments finished before the specified date. Expected in ISO 8601 format (<code>2019-03-15T08:00:00Z</code>).</td>
</tr>
<tr>
<td><code>environment</code></td>
<td>string</td>
<td>no</td>
<td>The <a href="../ci/environments/_index.html">name of the environment</a> to filter deployments by.</td>
</tr>
<tr>
<td><code>status</code></td>
<td>string</td>
<td>no</td>
<td>The status to filter deployments by. One of <code>created</code>, <code>running</code>, <code>success</code>, <code>failed</code>, <code>canceled</code>, or <code>blocked</code>.</td>
</tr>
</tbody>
</table>
<pre><code class="language-shell">curl --request &quot;GET&quot; \
  --header &quot;PRIVATE-TOKEN: &lt;your_access_token&gt;&quot; \
  --url &quot;https://gitlab.example.com/api/v4/projects/1/deployments&quot;
</code></pre>
<p>{{&lt; alert type="note" &gt;}}</p>
<p>When using <code>finished_before</code> or <code>finished_after</code>, you should specify the <code>order_by</code> to be <code>finished_at</code> and <code>status</code> should be <code>success</code>.</p>
<p>{{&lt; /alert &gt;}}</p>
<p>Example response:</p>
<pre><code class="language-json">[
  {
    &quot;created_at&quot;: &quot;2016-08-11T07:36:40.222Z&quot;,
    &quot;updated_at&quot;: &quot;2016-08-11T07:38:12.414Z&quot;,
    &quot;status&quot;: &quot;created&quot;,
    &quot;deployable&quot;: {
      &quot;commit&quot;: {
        &quot;author_email&quot;: &quot;admin@example.com&quot;,
        &quot;author_name&quot;: &quot;Administrator&quot;,
        &quot;created_at&quot;: &quot;2016-08-11T09:36:01.000+02:00&quot;,
        &quot;id&quot;: &quot;99d03678b90d914dbb1b109132516d71a4a03ea8&quot;,
        &quot;message&quot;: &quot;Merge branch 'new-title' into 'main'\r\n\r\nUpdate README\r\n\r\n\r\n\r\nSee merge request !1&quot;,
        &quot;short_id&quot;: &quot;99d03678&quot;,
        &quot;title&quot;: &quot;Merge branch 'new-title' into 'main'\r&quot;
      },
      &quot;coverage&quot;: null,
      &quot;created_at&quot;: &quot;2016-08-11T07:36:27.357Z&quot;,
      &quot;finished_at&quot;: &quot;2016-08-11T07:36:39.851Z&quot;,
      &quot;id&quot;: 657,
      &quot;name&quot;: &quot;deploy&quot;,
      &quot;ref&quot;: &quot;main&quot;,
      &quot;runner&quot;: null,
      &quot;stage&quot;: &quot;deploy&quot;,
      &quot;started_at&quot;: null,
      &quot;status&quot;: &quot;success&quot;,
      &quot;tag&quot;: false,
      &quot;project&quot;: {
        &quot;ci_job_token_scope_enabled&quot;: false
      },
      &quot;user&quot;: {
        &quot;id&quot;: 1,
        &quot;name&quot;: &quot;Administrator&quot;,
        &quot;username&quot;: &quot;root&quot;,
        &quot;state&quot;: &quot;active&quot;,
        &quot;avatar_url&quot;: &quot;http://www.gravatar.com/avatar/e64c7d89f26bd1972efa854d13d7dd61?s=80&amp;d=identicon&quot;,
        &quot;web_url&quot;: &quot;http://gitlab.dev/root&quot;,
        &quot;created_at&quot;: &quot;2015-12-21T13:14:24.077Z&quot;,
        &quot;bio&quot;: null,
        &quot;location&quot;: null,
        &quot;public_email&quot;: &quot;&quot;,
        &quot;linkedin&quot;: &quot;&quot;,
        &quot;twitter&quot;: &quot;&quot;,
        &quot;website_url&quot;: &quot;&quot;,
        &quot;organization&quot;: &quot;&quot;
      },
      &quot;pipeline&quot;: {
        &quot;created_at&quot;: &quot;2016-08-11T02:12:10.222Z&quot;,
        &quot;id&quot;: 36,
        &quot;ref&quot;: &quot;main&quot;,
        &quot;sha&quot;: &quot;99d03678b90d914dbb1b109132516d71a4a03ea8&quot;,
        &quot;status&quot;: &quot;success&quot;,
        &quot;updated_at&quot;: &quot;2016-08-11T02:12:10.222Z&quot;,
        &quot;web_url&quot;: &quot;http://gitlab.dev/root/project/pipelines/12&quot;
      }
    },
    &quot;environment&quot;: {
      &quot;external_url&quot;: &quot;https://about.gitlab.com&quot;,
      &quot;id&quot;: 9,
      &quot;name&quot;: &quot;production&quot;
    },
    &quot;id&quot;: 41,
    &quot;iid&quot;: 1,
    &quot;ref&quot;: &quot;main&quot;,
    &quot;sha&quot;: &quot;99d03678b90d914dbb1b109132516d71a4a03ea8&quot;,
    &quot;user&quot;: {
      &quot;avatar_url&quot;: &quot;http://www.gravatar.com/avatar/e64c7d89f26bd1972efa854d13d7dd61?s=80&amp;d=identicon&quot;,
      &quot;id&quot;: 1,
      &quot;name&quot;: &quot;Administrator&quot;,
      &quot;state&quot;: &quot;active&quot;,
      &quot;username&quot;: &quot;root&quot;,
      &quot;web_url&quot;: &quot;http://localhost:3000/root&quot;
    }
  },
  {
    &quot;created_at&quot;: &quot;2016-08-11T11:32:35.444Z&quot;,
    &quot;updated_at&quot;: &quot;2016-08-11T11:34:01.123Z&quot;,
    &quot;status&quot;: &quot;created&quot;,
    &quot;deployable&quot;: {
      &quot;commit&quot;: {
        &quot;author_email&quot;: &quot;admin@example.com&quot;,
        &quot;author_name&quot;: &quot;Administrator&quot;,
        &quot;created_at&quot;: &quot;2016-08-11T13:28:26.000+02:00&quot;,
        &quot;id&quot;: &quot;a91957a858320c0e17f3a0eca7cfacbff50ea29a&quot;,
        &quot;message&quot;: &quot;Merge branch 'rename-readme' into 'main'\r\n\r\nRename README\r\n\r\n\r\n\r\nSee merge request !2&quot;,
        &quot;short_id&quot;: &quot;a91957a8&quot;,
        &quot;title&quot;: &quot;Merge branch 'rename-readme' into 'main'\r&quot;
      },
      &quot;coverage&quot;: null,
      &quot;created_at&quot;: &quot;2016-08-11T11:32:24.456Z&quot;,
      &quot;finished_at&quot;: &quot;2016-08-11T11:32:35.145Z&quot;,
      &quot;id&quot;: 664,
      &quot;name&quot;: &quot;deploy&quot;,
      &quot;ref&quot;: &quot;main&quot;,
      &quot;runner&quot;: null,
      &quot;stage&quot;: &quot;deploy&quot;,
      &quot;started_at&quot;: null,
      &quot;status&quot;: &quot;success&quot;,
      &quot;tag&quot;: false,
      &quot;project&quot;: {
        &quot;ci_job_token_scope_enabled&quot;: false
      },
      &quot;user&quot;: {
        &quot;id&quot;: 1,
        &quot;name&quot;: &quot;Administrator&quot;,
        &quot;username&quot;: &quot;root&quot;,
        &quot;state&quot;: &quot;active&quot;,
        &quot;avatar_url&quot;: &quot;http://www.gravatar.com/avatar/e64c7d89f26bd1972efa854d13d7dd61?s=80&amp;d=identicon&quot;,
        &quot;web_url&quot;: &quot;http://gitlab.dev/root&quot;,
        &quot;created_at&quot;: &quot;2015-12-21T13:14:24.077Z&quot;,
        &quot;bio&quot;: null,
        &quot;location&quot;: null,
        &quot;public_email&quot;: &quot;&quot;,
        &quot;linkedin&quot;: &quot;&quot;,
        &quot;twitter&quot;: &quot;&quot;,
        &quot;website_url&quot;: &quot;&quot;,
        &quot;organization&quot;: &quot;&quot;
      },
      &quot;pipeline&quot;: {
        &quot;created_at&quot;: &quot;2016-08-11T07:43:52.143Z&quot;,
        &quot;id&quot;: 37,
        &quot;ref&quot;: &quot;main&quot;,
        &quot;sha&quot;: &quot;a91957a858320c0e17f3a0eca7cfacbff50ea29a&quot;,
        &quot;status&quot;: &quot;success&quot;,
        &quot;updated_at&quot;: &quot;2016-08-11T07:43:52.143Z&quot;,
        &quot;web_url&quot;: &quot;http://gitlab.dev/root/project/pipelines/13&quot;
      }
    },
    &quot;environment&quot;: {
      &quot;external_url&quot;: &quot;https://about.gitlab.com&quot;,
      &quot;id&quot;: 9,
      &quot;name&quot;: &quot;production&quot;
    },
    &quot;id&quot;: 42,
    &quot;iid&quot;: 2,
    &quot;ref&quot;: &quot;main&quot;,
    &quot;sha&quot;: &quot;a91957a858320c0e17f3a0eca7cfacbff50ea29a&quot;,
    &quot;user&quot;: {
      &quot;avatar_url&quot;: &quot;http://www.gravatar.com/avatar/e64c7d89f26bd1972efa854d13d7dd61?s=80&amp;d=identicon&quot;,
      &quot;id&quot;: 1,
      &quot;name&quot;: &quot;Administrator&quot;,
      &quot;state&quot;: &quot;active&quot;,
      &quot;username&quot;: &quot;root&quot;,
      &quot;web_url&quot;: &quot;http://localhost:3000/root&quot;
    }
  }
]
</code></pre>
<h2>Get a specific deployment</h2>
<pre><code class="language-plaintext">GET /projects/:id/deployments/:deployment_id
</code></pre>
<table>
<thead>
<tr>
<th>Attribute</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>id</code></td>
<td>integer or string</td>
<td>yes</td>
<td>The ID or <a href="rest/_index.md#namespaced-paths">URL-encoded path of the project</a></td>
</tr>
<tr>
<td><code>deployment_id</code></td>
<td>integer</td>
<td>yes</td>
<td>The ID of the deployment</td>
</tr>
</tbody>
</table>
<pre><code class="language-shell">curl --request &quot;GET&quot; \
  --header &quot;PRIVATE-TOKEN: &lt;your_access_token&gt;&quot; \
  --url &quot;https://gitlab.example.com/api/v4/projects/1/deployments/1&quot;
</code></pre>
<p>Example response:</p>
<pre><code class="language-json">{
  &quot;id&quot;: 42,
  &quot;iid&quot;: 2,
  &quot;ref&quot;: &quot;main&quot;,
  &quot;sha&quot;: &quot;a91957a858320c0e17f3a0eca7cfacbff50ea29a&quot;,
  &quot;created_at&quot;: &quot;2016-08-11T11:32:35.444Z&quot;,
  &quot;updated_at&quot;: &quot;2016-08-11T11:34:01.123Z&quot;,
  &quot;status&quot;: &quot;success&quot;,
  &quot;user&quot;: {
    &quot;name&quot;: &quot;Administrator&quot;,
    &quot;username&quot;: &quot;root&quot;,
    &quot;id&quot;: 1,
    &quot;state&quot;: &quot;active&quot;,
    &quot;avatar_url&quot;: &quot;http://www.gravatar.com/avatar/e64c7d89f26bd1972efa854d13d7dd61?s=80&amp;d=identicon&quot;,
    &quot;web_url&quot;: &quot;http://localhost:3000/root&quot;
  },
  &quot;environment&quot;: {
    &quot;id&quot;: 9,
    &quot;name&quot;: &quot;production&quot;,
    &quot;external_url&quot;: &quot;https://about.gitlab.com&quot;
  },
  &quot;deployable&quot;: {
    &quot;id&quot;: 664,
    &quot;status&quot;: &quot;success&quot;,
    &quot;stage&quot;: &quot;deploy&quot;,
    &quot;name&quot;: &quot;deploy&quot;,
    &quot;ref&quot;: &quot;main&quot;,
    &quot;tag&quot;: false,
    &quot;coverage&quot;: null,
    &quot;created_at&quot;: &quot;2016-08-11T11:32:24.456Z&quot;,
    &quot;started_at&quot;: null,
    &quot;finished_at&quot;: &quot;2016-08-11T11:32:35.145Z&quot;,
    &quot;project&quot;: {
      &quot;ci_job_token_scope_enabled&quot;: false
    },
    &quot;user&quot;: {
      &quot;id&quot;: 1,
      &quot;name&quot;: &quot;Administrator&quot;,
      &quot;username&quot;: &quot;root&quot;,
      &quot;state&quot;: &quot;active&quot;,
      &quot;avatar_url&quot;: &quot;http://www.gravatar.com/avatar/e64c7d89f26bd1972efa854d13d7dd61?s=80&amp;d=identicon&quot;,
      &quot;web_url&quot;: &quot;http://gitlab.dev/root&quot;,
      &quot;created_at&quot;: &quot;2015-12-21T13:14:24.077Z&quot;,
      &quot;bio&quot;: null,
      &quot;location&quot;: null,
      &quot;linkedin&quot;: &quot;&quot;,
      &quot;twitter&quot;: &quot;&quot;,
      &quot;website_url&quot;: &quot;&quot;,
      &quot;organization&quot;: &quot;&quot;
    },
    &quot;commit&quot;: {
      &quot;id&quot;: &quot;a91957a858320c0e17f3a0eca7cfacbff50ea29a&quot;,
      &quot;short_id&quot;: &quot;a91957a8&quot;,
      &quot;title&quot;: &quot;Merge branch 'rename-readme' into 'main'\r&quot;,
      &quot;author_name&quot;: &quot;Administrator&quot;,
      &quot;author_email&quot;: &quot;admin@example.com&quot;,
      &quot;created_at&quot;: &quot;2016-08-11T13:28:26.000+02:00&quot;,
      &quot;message&quot;: &quot;Merge branch 'rename-readme' into 'main'\r\n\r\nRename README\r\n\r\n\r\n\r\nSee merge request !2&quot;
    },
    &quot;pipeline&quot;: {
      &quot;created_at&quot;: &quot;2016-08-11T07:43:52.143Z&quot;,
      &quot;id&quot;: 42,
      &quot;ref&quot;: &quot;main&quot;,
      &quot;sha&quot;: &quot;a91957a858320c0e17f3a0eca7cfacbff50ea29a&quot;,
      &quot;status&quot;: &quot;success&quot;,
      &quot;updated_at&quot;: &quot;2016-08-11T07:43:52.143Z&quot;,
      &quot;web_url&quot;: &quot;http://gitlab.dev/root/project/pipelines/5&quot;
    },
    &quot;runner&quot;: null
  }
}
</code></pre>
<p>When <a href="../ci/environments/deployment_approvals.md#add-multiple-approval-rules">multiple approval rules</a> are configured, deployments created by users on GitLab Premium or Ultimate include the <code>approval_summary</code> property:</p>
<pre><code class="language-json">{
  &quot;approval_summary&quot;: {
    &quot;rules&quot;: [
      {
        &quot;user_id&quot;: null,
        &quot;group_id&quot;: 134,
        &quot;access_level&quot;: null,
        &quot;access_level_description&quot;: &quot;qa-group&quot;,
        &quot;required_approvals&quot;: 1,
        &quot;deployment_approvals&quot;: []
      },
      {
        &quot;user_id&quot;: null,
        &quot;group_id&quot;: 135,
        &quot;access_level&quot;: null,
        &quot;access_level_description&quot;: &quot;security-group&quot;,
        &quot;required_approvals&quot;: 2,
        &quot;deployment_approvals&quot;: [
          {
            &quot;user&quot;: {
              &quot;id&quot;: 100,
              &quot;username&quot;: &quot;security-user-1&quot;,
              &quot;name&quot;: &quot;security user-1&quot;,
              &quot;state&quot;: &quot;active&quot;,
              &quot;avatar_url&quot;: &quot;https://www.gravatar.com/avatar/e130fcd3a1681f41a3de69d10841afa9?s=80&amp;d=identicon&quot;,
              &quot;web_url&quot;: &quot;http://localhost:3000/security-user-1&quot;
            },
            &quot;status&quot;: &quot;approved&quot;,
            &quot;created_at&quot;: &quot;2022-04-11T03:37:03.058Z&quot;,
            &quot;comment&quot;: null
          }
        ]
      }
    ]
  }
  ...
}
</code></pre>
<h2>Create a deployment</h2>
<pre><code class="language-plaintext">POST /projects/:id/deployments
</code></pre>
<table>
<thead>
<tr>
<th>Attribute</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>id</code></td>
<td>integer or string</td>
<td>yes</td>
<td>The ID or <a href="rest/_index.md#namespaced-paths">URL-encoded path of the project</a>.</td>
</tr>
<tr>
<td><code>environment</code></td>
<td>string</td>
<td>yes</td>
<td>The <a href="../ci/environments/_index.html">name of the environment</a> to create the deployment for.</td>
</tr>
<tr>
<td><code>sha</code></td>
<td>string</td>
<td>yes</td>
<td>The SHA of the commit that is deployed.</td>
</tr>
<tr>
<td><code>ref</code></td>
<td>string</td>
<td>yes</td>
<td>The name of the branch or tag that is deployed.</td>
</tr>
<tr>
<td><code>tag</code></td>
<td>boolean</td>
<td>yes</td>
<td>A boolean that indicates if the deployed ref is a tag (<code>true</code>) or not (<code>false</code>).</td>
</tr>
<tr>
<td><code>status</code></td>
<td>string</td>
<td>yes</td>
<td>The status of the deployment that is created. One of <code>running</code>, <code>success</code>, <code>failed</code>, or <code>canceled</code></td>
</tr>
</tbody>
</table>
<pre><code class="language-shell">curl --request &quot;POST&quot; \
  --header &quot;PRIVATE-TOKEN: &lt;your_access_token&gt;&quot; \
  --data &quot;environment=production&amp;sha=a91957a858320c0e17f3a0eca7cfacbff50ea29a&amp;ref=main&amp;tag=false&amp;status=success&quot; \
  --url &quot;https://gitlab.example.com/api/v4/projects/1/deployments&quot;
</code></pre>
<p>Example response:</p>
<pre><code class="language-json">{
  &quot;id&quot;: 42,
  &quot;iid&quot;: 2,
  &quot;ref&quot;: &quot;main&quot;,
  &quot;sha&quot;: &quot;a91957a858320c0e17f3a0eca7cfacbff50ea29a&quot;,
  &quot;created_at&quot;: &quot;2016-08-11T11:32:35.444Z&quot;,
  &quot;status&quot;: &quot;success&quot;,
  &quot;user&quot;: {
    &quot;name&quot;: &quot;Administrator&quot;,
    &quot;username&quot;: &quot;root&quot;,
    &quot;id&quot;: 1,
    &quot;state&quot;: &quot;active&quot;,
    &quot;avatar_url&quot;: &quot;http://www.gravatar.com/avatar/e64c7d89f26bd1972efa854d13d7dd61?s=80&amp;d=identicon&quot;,
    &quot;web_url&quot;: &quot;http://localhost:3000/root&quot;
  },
  &quot;environment&quot;: {
    &quot;id&quot;: 9,
    &quot;name&quot;: &quot;production&quot;,
    &quot;external_url&quot;: &quot;https://about.gitlab.com&quot;
  },
  &quot;deployable&quot;: null
}
</code></pre>
<p>Deployments created by users on GitLab Premium or Ultimate include the <code>approvals</code> and <code>pending_approval_count</code> properties:</p>
<pre><code class="language-json">{
  &quot;status&quot;: &quot;created&quot;,
  &quot;pending_approval_count&quot;: 0,
  &quot;approvals&quot;: [],
  ...
}
</code></pre>
<h2>Update a deployment</h2>
<pre><code class="language-plaintext">PUT /projects/:id/deployments/:deployment_id
</code></pre>
<table>
<thead>
<tr>
<th>Attribute</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>id</code></td>
<td>integer or string</td>
<td>yes</td>
<td>The ID or <a href="rest/_index.md#namespaced-paths">URL-encoded path of the project</a>.</td>
</tr>
<tr>
<td><code>deployment_id</code></td>
<td>integer</td>
<td>yes</td>
<td>The ID of the deployment to update.</td>
</tr>
<tr>
<td><code>status</code></td>
<td>string</td>
<td>yes</td>
<td>The new status of the deployment. One of <code>running</code>, <code>success</code>, <code>failed</code>, or <code>canceled</code>.</td>
</tr>
</tbody>
</table>
<pre><code class="language-shell">curl --request &quot;PUT&quot; \
  --header &quot;PRIVATE-TOKEN: &lt;your_access_token&gt;&quot; \
  --data &quot;status=success&quot; \
  --url &quot;https://gitlab.example.com/api/v4/projects/1/deployments/42&quot;
</code></pre>
<p>Example response:</p>
<pre><code class="language-json">{
  &quot;id&quot;: 42,
  &quot;iid&quot;: 2,
  &quot;ref&quot;: &quot;main&quot;,
  &quot;sha&quot;: &quot;a91957a858320c0e17f3a0eca7cfacbff50ea29a&quot;,
  &quot;created_at&quot;: &quot;2016-08-11T11:32:35.444Z&quot;,
  &quot;status&quot;: &quot;success&quot;,
  &quot;user&quot;: {
    &quot;name&quot;: &quot;Administrator&quot;,
    &quot;username&quot;: &quot;root&quot;,
    &quot;id&quot;: 1,
    &quot;state&quot;: &quot;active&quot;,
    &quot;avatar_url&quot;: &quot;http://www.gravatar.com/avatar/e64c7d89f26bd1972efa854d13d7dd61?s=80&amp;d=identicon&quot;,
    &quot;web_url&quot;: &quot;http://localhost:3000/root&quot;
  },
  &quot;environment&quot;: {
    &quot;id&quot;: 9,
    &quot;name&quot;: &quot;production&quot;,
    &quot;external_url&quot;: &quot;https://about.gitlab.com&quot;
  },
  &quot;deployable&quot;: null
}
</code></pre>
<p>Deployments created by users on GitLab Premium or Ultimate include the <code>approvals</code> and <code>pending_approval_count</code> properties:</p>
<pre><code class="language-json">{
  &quot;status&quot;: &quot;created&quot;,
  &quot;pending_approval_count&quot;: 0,
  &quot;approvals&quot;: [
    {
      &quot;user&quot;: {
        &quot;id&quot;: 49,
        &quot;username&quot;: &quot;project_6_bot&quot;,
        &quot;name&quot;: &quot;****&quot;,
        &quot;state&quot;: &quot;active&quot;,
        &quot;avatar_url&quot;: &quot;https://www.gravatar.com/avatar/e83ac685f68ea07553ad3054c738c709?s=80&amp;d=identicon&quot;,
        &quot;web_url&quot;: &quot;http://localhost:3000/project_6_bot&quot;
      },
      &quot;status&quot;: &quot;approved&quot;,
      &quot;created_at&quot;: &quot;2022-02-24T20:22:30.097Z&quot;,
      &quot;comment&quot;: &quot;Looks good to me&quot;
    }
  ],
  ...
}
</code></pre>
<h2>Delete a specific deployment</h2>
<p>Delete a specific deployment that is not currently the last deployment for an environment or in a <code>running</code> state</p>
<pre><code class="language-plaintext">DELETE /projects/:id/deployments/:deployment_id
</code></pre>
<table>
<thead>
<tr>
<th>Attribute</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>id</code></td>
<td>integer or string</td>
<td>yes</td>
<td>The ID or <a href="rest/_index.md#namespaced-paths">URL-encoded path of the project</a></td>
</tr>
<tr>
<td><code>deployment_id</code></td>
<td>integer</td>
<td>yes</td>
<td>The ID of the deployment</td>
</tr>
</tbody>
</table>
<pre><code class="language-shell">curl --request &quot;DELETE&quot; \
  --header &quot;PRIVATE-TOKEN: &lt;your_access_token&gt;&quot; \
  --url &quot;https://gitlab.example.com/api/v4/projects/1/deployments/1&quot;
</code></pre>
<p>Example responses:</p>
<pre><code class="language-json">{ &quot;message&quot;: &quot;204 Deployment destroyed&quot; }
</code></pre>
<pre><code class="language-json">{ &quot;message&quot;: &quot;403 Forbidden&quot; }
</code></pre>
<pre><code class="language-json">{ &quot;message&quot;: &quot;400 Cannot destroy running deployment&quot; }
</code></pre>
<pre><code class="language-json">{ &quot;message&quot;: &quot;400 Deployment currently deployed to environment&quot; }
</code></pre>
<h2>List of merge requests associated with a deployment</h2>
<p>{{&lt; alert type="note" &gt;}}</p>
<p>Not all deployments can be associated with merge requests. See
<a href="../ci/environments/deployments.md#track-newly-included-merge-requests-per-deployment">Track what merge requests were deployed to an environment</a>
for more information.</p>
<p>{{&lt; /alert &gt;}}</p>
<p>This API retrieves the list of merge requests shipped with a given deployment:</p>
<pre><code class="language-plaintext">GET /projects/:id/deployments/:deployment_id/merge_requests
</code></pre>
<p>It supports the same parameters as the <a href="merge_requests.md#list-merge-requests">Merge requests API</a> and returns a response using the same format:</p>
<pre><code class="language-shell">curl --request &quot;GET&quot; \
  --header &quot;PRIVATE-TOKEN: &lt;your_access_token&gt;&quot; \
  --url &quot;https://gitlab.example.com/api/v4/projects/1/deployments/42/merge_requests&quot;
</code></pre>
<h2>Approve or reject a blocked deployment</h2>
<p>{{&lt; details &gt;}}</p>
<ul>
<li>Tier: Premium, Ultimate</li>
<li>Offering: GitLab.com, GitLab Self-Managed, GitLab Dedicated</li>
</ul>
<p>{{&lt; /details &gt;}}</p>
<p>{{&lt; history &gt;}}</p>
<ul>
<li><a href="https://gitlab.com/gitlab-org/gitlab/-/issues/343864">Introduced</a> in GitLab 14.7 <a href="../administration/feature_flags/_index.html">with a flag</a> named <code>deployment_approvals</code>. Disabled by default.</li>
<li><a href="https://gitlab.com/gitlab-org/gitlab/-/issues/347342">Feature flag removed</a> in GitLab 14.8.</li>
</ul>
<p>{{&lt; /history &gt;}}</p>
<p>See <a href="../ci/environments/deployment_approvals.html">Deployment Approvals</a> for more information about this feature.</p>
<pre><code class="language-plaintext">POST /projects/:id/deployments/:deployment_id/approval
</code></pre>
<table>
<thead>
<tr>
<th>Attribute</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>id</code></td>
<td>integer or string</td>
<td>yes</td>
<td>The ID or <a href="rest/_index.md#namespaced-paths">URL-encoded path of the project</a>.</td>
</tr>
<tr>
<td><code>deployment_id</code></td>
<td>integer</td>
<td>yes</td>
<td>The ID of the deployment.</td>
</tr>
<tr>
<td><code>status</code></td>
<td>string</td>
<td>yes</td>
<td>The status of the approval (either <code>approved</code> or <code>rejected</code>).</td>
</tr>
<tr>
<td><code>comment</code></td>
<td>string</td>
<td>no</td>
<td>A comment to go with the approval</td>
</tr>
<tr>
<td><code>represented_as</code></td>
<td>string</td>
<td>no</td>
<td>The name of the User/Group/Role to use for the approval, when the user belongs to <a href="../ci/environments/deployment_approvals.md#add-multiple-approval-rules">multiple approval rules</a>.</td>
</tr>
</tbody>
</table>
<pre><code class="language-shell">curl --request &quot;POST&quot; \
  --data &quot;status=approved&amp;comment=Looks good to me&amp;represented_as=security&quot; \
  --header &quot;PRIVATE-TOKEN: &lt;your_access_token&gt;&quot; \
  --url &quot;https://gitlab.example.com/api/v4/projects/1/deployments/1/approval&quot;
</code></pre>
<p>Example response:</p>
<pre><code class="language-json">{
  &quot;user&quot;: {
    &quot;id&quot;: 100,
    &quot;username&quot;: &quot;security-user-1&quot;,
    &quot;name&quot;: &quot;security user-1&quot;,
    &quot;state&quot;: &quot;active&quot;,
    &quot;avatar_url&quot;: &quot;https://www.gravatar.com/avatar/e130fcd3a1681f41a3de69d10841afa9?s=80&amp;d=identicon&quot;,
    &quot;web_url&quot;: &quot;http://localhost:3000/security-user-1&quot;
  },
  &quot;status&quot;: &quot;approved&quot;,
  &quot;created_at&quot;: &quot;2022-02-24T20:22:30.097Z&quot;,
  &quot;comment&quot;:&quot;Looks good to me&quot;
}
</code></pre></code></pre>
</body>
</html>
