<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title># Instance service accounts</title>
    <link rel="stylesheet" href="/../style.css">
</head>
<body>
    <pre><code><hr />
<p>stage: Software Supply Chain Security
group: Authentication
info: To determine the technical writer assigned to the Stage/Group associated with this page, see https://handbook.gitlab.com/handbook/product/ux/technical-writing/#assignments
title: Service accounts API
description: GitLab service accounts API manages service accounts at instance or group level, with robust token and account management controls.</p>
<hr />
<p>{{&lt; details &gt;}}</p>
<ul>
<li>Tier: Premium, Ultimate</li>
<li>Offering: GitLab.com, GitLab Self-Managed, GitLab Dedicated</li>
</ul>
<p>{{&lt; /details &gt;}}</p>
<p>Use this API to interact with <a href="../user/profile/service_accounts.html">service accounts</a>.</p>
<p>You can also interact with service accounts through the <a href="users.html">users API</a>.</p>
<h2>Instance service accounts</h2>
<p>{{&lt; details &gt;}}</p>
<ul>
<li>Offering: GitLab Self-Managed, GitLab Dedicated</li>
</ul>
<p>{{&lt; /details &gt;}}</p>
<p>Instance service accounts are available to an entire GitLab instance, but must still be added
to groups and projects like a human user.</p>
<p>To manage personal access tokens for instance service accounts, use the <a href="personal_access_tokens.html">personal access tokens API</a>.</p>
<p>Prerequisites:</p>
<ul>
<li>You must have administrator access to the instance.</li>
</ul>
<h3>List all instance service accounts</h3>
<p>{{&lt; history &gt;}}</p>
<ul>
<li>List all service accounts <a href="https://gitlab.com/gitlab-org/gitlab/-/issues/416729">introduced</a> in GitLab 17.1.</li>
</ul>
<p>{{&lt; /history &gt;}}</p>
<p>Lists all instance service accounts.</p>
<p>Use the <code>page</code> and <code>per_page</code> <a href="rest/_index.md#offset-based-pagination">pagination parameters</a> to filter the results.</p>
<pre><code class="language-plaintext">GET /service_accounts
</code></pre>
<p>Supported attributes:</p>
<table>
<thead>
<tr>
<th>Attribute</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>order_by</code></td>
<td>string</td>
<td>no</td>
<td>Attribute to order results by. Possible values: <code>id</code> or <code>username</code>. Default value: <code>id</code>.</td>
</tr>
<tr>
<td><code>sort</code></td>
<td>string</td>
<td>no</td>
<td>Direction to sort results by. Possible values: <code>desc</code> or <code>asc</code>. Default value: <code>desc</code>.</td>
</tr>
</tbody>
</table>
<p>Example request:</p>
<pre><code class="language-shell">curl --request GET --header &quot;PRIVATE-TOKEN: &lt;your_access_token&gt;&quot; &quot;https://gitlab.example.com/api/v4/service_accounts&quot;
</code></pre>
<p>Example response:</p>
<pre><code class="language-json">[
  {
    &quot;id&quot;: 114,
    &quot;username&quot;: &quot;service_account_33&quot;,
    &quot;name&quot;: &quot;Service account user&quot;
  },
  {
    &quot;id&quot;: 137,
    &quot;username&quot;: &quot;service_account_34&quot;,
    &quot;name&quot;: &quot;john doe&quot;
  }
]
</code></pre>
<h3>Create an instance service account</h3>
<p>{{&lt; history &gt;}}</p>
<ul>
<li><a href="https://gitlab.com/gitlab-org/gitlab/-/issues/406782">Introduced</a> in GitLab 16.1</li>
<li><code>username</code> and <code>name</code> attributes <a href="https://gitlab.com/gitlab-org/gitlab/-/merge_requests/144841">added</a> in GitLab 16.10.</li>
<li><code>email</code> attribute <a href="https://gitlab.com/gitlab-org/gitlab/-/merge_requests/178689">added</a> in GitLab 17.9.</li>
</ul>
<p>{{&lt; /history &gt;}}</p>
<p>Creates an instance service account.</p>
<pre><code class="language-plaintext">POST /service_accounts
POST /service_accounts?email=custom_email@gitlab.example.com
</code></pre>
<p>Supported attributes:</p>
<table>
<thead>
<tr>
<th>Attribute</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>name</code></td>
<td>string</td>
<td>no</td>
<td>Name of the user. If not set, uses <code>Service account user</code>.</td>
</tr>
<tr>
<td><code>username</code></td>
<td>string</td>
<td>no</td>
<td>Username of the user account. If undefined, generates a name prepended with <code>service_account_</code>.</td>
</tr>
<tr>
<td><code>email</code></td>
<td>string</td>
<td>no</td>
<td>Email of the user account. If undefined, generates a no-reply email address. Custom email addresses require confirmation, unless the email confirmation settings are <a href="../administration/settings/sign_up_restrictions.md#confirm-user-email">turned off</a>.</td>
</tr>
</tbody>
</table>
<p>Example request:</p>
<pre><code class="language-shell">curl --request POST --header &quot;PRIVATE-TOKEN: &lt;your_access_token&gt;&quot; &quot;https://gitlab.example.com/api/v4/service_accounts&quot;
</code></pre>
<p>Example response:</p>
<pre><code class="language-json">{
  &quot;id&quot;: 57,
  &quot;username&quot;: &quot;service_account_6018816a18e515214e0c34c2b33523fc&quot;,
  &quot;name&quot;: &quot;Service account user&quot;,
  &quot;email&quot;: &quot;service_account_6018816a18e515214e0c34c2b33523fc@noreply.gitlab.example.com&quot;
}
</code></pre>
<p>If the email address defined by the <code>email</code> attribute is already in use by another user,
returns a <code>400 Bad request</code> error.</p>
<h3>Update an instance service account</h3>
<p>{{&lt; history &gt;}}</p>
<ul>
<li><a href="https://gitlab.com/gitlab-org/gitlab/-/merge_requests/196309/">Introduced</a> in GitLab 18.2.</li>
</ul>
<p>{{&lt; /history &gt;}}</p>
<p>Updates a specified instance service account.</p>
<pre><code class="language-plaintext">PATCH /service_accounts/:id
</code></pre>
<p>Parameters:</p>
<table>
<thead>
<tr>
<th style="text-align: left;">Attribute</th>
<th style="text-align: left;">Type</th>
<th style="text-align: left;">Required</th>
<th style="text-align: left;">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;"><code>id</code></td>
<td style="text-align: left;">integer</td>
<td style="text-align: left;">yes</td>
<td style="text-align: left;">ID of the service account.</td>
</tr>
<tr>
<td style="text-align: left;"><code>name</code></td>
<td style="text-align: left;">string</td>
<td style="text-align: left;">no</td>
<td style="text-align: left;">Name of the user.</td>
</tr>
<tr>
<td style="text-align: left;"><code>username</code></td>
<td style="text-align: left;">string</td>
<td style="text-align: left;">no</td>
<td style="text-align: left;">Username of the user account.</td>
</tr>
<tr>
<td style="text-align: left;"><code>email</code></td>
<td style="text-align: left;">string</td>
<td style="text-align: left;">no</td>
<td style="text-align: left;">Email of the user account. Custom email addresses require confirmation, unless the email confirmation settings are <a href="../administration/settings/sign_up_restrictions.md#confirm-user-email">turned off</a>.</td>
</tr>
</tbody>
</table>
<p>Example request:</p>
<pre><code class="language-shell">curl --request PATCH --header &quot;PRIVATE-TOKEN: &lt;your_access_token&gt;&quot; &quot;https://gitlab.example.com/api/v4/service_accounts/57&quot; --data &quot;name=Updated Service Account email=updated_email@example.com&quot;
</code></pre>
<p>Example response:</p>
<pre><code class="language-json">{
  &quot;id&quot;: 57,
  &quot;username&quot;: &quot;service_account_6018816a18e515214e0c34c2b33523fc&quot;,
  &quot;name&quot;: &quot;Updated Service Account&quot;,
  &quot;email&quot;: &quot;service_account_&lt;random_hash&gt;@noreply.gitlab.example.com&quot;,
  &quot;unconfirmed_email&quot;: &quot;custom_email@example.com&quot;
}
</code></pre>
<h2>Group service accounts</h2>
<p>Group service accounts are owned by a specific top-level group and can inherit membership to
subgroups and projects like a human user.</p>
<p>Prerequisites:</p>
<ul>
<li>On GitLab.com, you must have the Owner role for the group.</li>
<li>On GitLab Self-Managed or GitLab Dedicated you must either:</li>
<li>Be an administrator for the instance.</li>
<li>Have the Owner role in a top-level group and be <a href="../administration/settings/account_and_limit_settings.md#allow-top-level-group-owners-to-create-service-accounts">allowed to create service accounts</a>.</li>
</ul>
<h3>List all group service accounts</h3>
<p>{{&lt; history &gt;}}</p>
<ul>
<li><a href="https://gitlab.com/gitlab-org/gitlab/-/issues/416729">Introduced</a> in GitLab 17.1.</li>
</ul>
<p>{{&lt; /history &gt;}}</p>
<p>Lists all service accounts in a specified top-level group.</p>
<p>Use the <code>page</code> and <code>per_page</code> <a href="rest/_index.md#offset-based-pagination">pagination parameters</a> to filter the results.</p>
<pre><code class="language-plaintext">GET /groups/:id/service_accounts
</code></pre>
<p>Parameters:</p>
<table>
<thead>
<tr>
<th>Attribute</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>id</code></td>
<td>integer or string</td>
<td>yes</td>
<td>The ID or <a href="rest/_index.md#namespaced-paths">URL-encoded path of the target group</a>.</td>
</tr>
<tr>
<td><code>order_by</code></td>
<td>string</td>
<td>no</td>
<td>Orders list of users by <code>username</code> or <code>id</code>. Default is <code>id</code>.</td>
</tr>
<tr>
<td><code>sort</code></td>
<td>string</td>
<td>no</td>
<td>Specifies sorting by <code>asc</code> or <code>desc</code>. Default is <code>desc</code>.</td>
</tr>
</tbody>
</table>
<p>Example request:</p>
<pre><code class="language-shell">curl --request GET --header &quot;PRIVATE-TOKEN: &lt;your_access_token&gt;&quot; &quot;https://gitlab.example.com/api/v4/groups/345/service_accounts&quot;
</code></pre>
<p>Example response:</p>
<pre><code class="language-json">[

  {
    &quot;id&quot;: 57,
    &quot;username&quot;: &quot;service_account_group_345_&lt;random_hash&gt;&quot;,
    &quot;name&quot;: &quot;Service account user&quot;,
    &quot;email&quot;: &quot;service_account_group_345_&lt;random_hash&gt;@noreply.gitlab.example.com&quot;
  },
  {
    &quot;id&quot;: 58,
    &quot;username&quot;: &quot;service_account_group_346_&lt;random_hash&gt;&quot;,
    &quot;name&quot;: &quot;Service account user&quot;,
    &quot;email&quot;: &quot;service_account_group_346_&lt;random_hash&gt;@noreply.gitlab.example.com&quot;,
    &quot;unconfirmed_email&quot;: &quot;custom_email@example.com&quot;
  }
]
</code></pre>
<h3>Create a group service account</h3>
<p>{{&lt; history &gt;}}</p>
<ul>
<li><a href="https://gitlab.com/gitlab-org/gitlab/-/issues/407775">Introduced</a> in GitLab 16.1.</li>
<li><code>username</code> and <code>name</code> attributes <a href="https://gitlab.com/gitlab-org/gitlab/-/merge_requests/144841">added</a> in GitLab 16.10.</li>
<li><code>email</code> attribute <a href="https://gitlab.com/gitlab-org/gitlab/-/merge_requests/181456">added</a> in GitLab 17.9 <a href="../administration/feature_flags/_index.html">with a flag</a> named <code>group_service_account_custom_email</code>.</li>
<li><code>email</code> attribute <a href="https://gitlab.com/gitlab-org/gitlab/-/merge_requests/186476">generally available</a> in GitLab 17.11. Feature flag <code>group_service_account_custom_email</code> removed.</li>
</ul>
<p>{{&lt; /history &gt;}}</p>
<p>Creates a service account in a specified top-level group.</p>
<p>{{&lt; alert type="note" &gt;}}</p>
<p>This endpoint only works on top-level groups.</p>
<p>{{&lt; /alert &gt;}}</p>
<pre><code class="language-plaintext">POST /groups/:id/service_accounts
</code></pre>
<p>Supported attributes:</p>
<table>
<thead>
<tr>
<th>Attribute</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>id</code></td>
<td>integer or string</td>
<td>yes</td>
<td>ID or <a href="rest/_index.md#namespaced-paths">URL-encoded path</a> of a top-level group.</td>
</tr>
<tr>
<td><code>name</code></td>
<td>string</td>
<td>no</td>
<td>User account name. If not specified, uses <code>Service account user</code>.</td>
</tr>
<tr>
<td><code>username</code></td>
<td>string</td>
<td>no</td>
<td>User account username. If not specified, generates a name prepended with <code>service_account_group_</code>.</td>
</tr>
<tr>
<td><code>email</code></td>
<td>string</td>
<td>no</td>
<td>Email of the user account. If not specified, generates an email prepended with <code>service_account_group_</code>. Custom email addresses require confirmation, unless the group has a matching <a href="../user/enterprise_user/_index.md#manage-group-domains">verified domain</a> or email confirmation settings are <a href="../administration/settings/sign_up_restrictions.md#confirm-user-email">turned off</a>.</td>
</tr>
</tbody>
</table>
<p>Example request:</p>
<pre><code class="language-shell">curl --request POST --header &quot;PRIVATE-TOKEN: &lt;your_access_token&gt;&quot; &quot;https://gitlab.example.com/api/v4/groups/345/service_accounts&quot; --data &quot;email=custom_email@example.com&quot;
</code></pre>
<p>Example response:</p>
<pre><code class="language-json">{
  &quot;id&quot;: 57,
  &quot;username&quot;: &quot;service_account_group_345_6018816a18e515214e0c34c2b33523fc&quot;,
  &quot;name&quot;: &quot;Service account user&quot;,
  &quot;email&quot;: &quot;custom_email@example.com&quot;
}
</code></pre>
<h3>Update a group service account</h3>
<p>{{&lt; history &gt;}}</p>
<ul>
<li><a href="https://gitlab.com/gitlab-org/gitlab/-/merge_requests/182607/">Introduced</a> in GitLab 17.10.</li>
<li>Add custom email address <a href="https://gitlab.com/gitlab-org/gitlab/-/merge_requests/196309">introduced</a> in GitLab 18.2.</li>
</ul>
<p>{{&lt; /history &gt;}}</p>
<p>Updates a service account in a specified top-level group.</p>
<p>{{&lt; alert type="note" &gt;}}</p>
<p>This endpoint only works on top-level groups.</p>
<p>{{&lt; /alert &gt;}}</p>
<pre><code class="language-plaintext">PATCH /groups/:id/service_accounts/:user_id
</code></pre>
<p>Parameters:</p>
<table>
<thead>
<tr>
<th>Attribute</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>id</code></td>
<td>integer or string</td>
<td>yes</td>
<td>The ID or <a href="rest/_index.md#namespaced-paths">URL-encoded path of the target group</a>.</td>
</tr>
<tr>
<td><code>user_id</code></td>
<td>integer</td>
<td>yes</td>
<td>The ID of the service account.</td>
</tr>
<tr>
<td><code>name</code></td>
<td>string</td>
<td>no</td>
<td>Name of the user.</td>
</tr>
<tr>
<td><code>username</code></td>
<td>string</td>
<td>no</td>
<td>Username of the user.</td>
</tr>
<tr>
<td><code>email</code></td>
<td>string</td>
<td>no</td>
<td>Email of the user account. Custom email addresses require confirmation, unless the group has a matching <a href="../user/enterprise_user/_index.md#manage-group-domains">verified domain</a> or email confirmation settings are <a href="../administration/settings/sign_up_restrictions.md#confirm-user-email">turned off</a>.</td>
</tr>
</tbody>
</table>
<p>Example request:</p>
<pre><code class="language-shell">curl --request PATCH --header &quot;PRIVATE-TOKEN: &lt;your_access_token&gt;&quot; &quot;https://gitlab.example.com/api/v4/groups/345/service_accounts/57&quot; --data &quot;name=Updated Service Account email=updated_email@example.com&quot;
</code></pre>
<p>Example response:</p>
<pre><code class="language-json">{
  &quot;id&quot;: 57,
  &quot;username&quot;: &quot;service_account_group_345_6018816a18e515214e0c34c2b33523fc&quot;,
  &quot;name&quot;: &quot;Updated Service Account&quot;,
  &quot;email&quot;: &quot;service_account_group_345_&lt;random_hash&gt;@noreply.gitlab.example.com&quot;,
  &quot;unconfirmed_email&quot;: &quot;custom_email@example.com&quot;
}
</code></pre>
<h3>Delete a group service account</h3>
<p>{{&lt; history &gt;}}</p>
<ul>
<li><a href="https://gitlab.com/gitlab-org/gitlab/-/issues/416729">Introduced</a> in GitLab 17.1.</li>
</ul>
<p>{{&lt; /history &gt;}}</p>
<p>Deletes a service account from a specified top-level group.</p>
<p>{{&lt; alert type="note" &gt;}}</p>
<p>This endpoint only works on top-level groups.</p>
<p>{{&lt; /alert &gt;}}</p>
<pre><code class="language-plaintext">DELETE /groups/:id/service_accounts/:user_id
</code></pre>
<p>Parameters:</p>
<table>
<thead>
<tr>
<th>Attribute</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>id</code></td>
<td>integer or string</td>
<td>yes</td>
<td>The ID or <a href="rest/_index.md#namespaced-paths">URL-encoded path of the target group</a>.</td>
</tr>
<tr>
<td><code>user_id</code></td>
<td>integer</td>
<td>yes</td>
<td>The ID of a service account.</td>
</tr>
<tr>
<td><code>hard_delete</code></td>
<td>boolean</td>
<td>no</td>
<td>If true, contributions that would usually be <a href="../user/profile/account/delete_account.md#associated-records">moved to a Ghost User</a> are instead deleted, as well as groups owned solely by this service account.</td>
</tr>
</tbody>
</table>
<p>Example request:</p>
<pre><code class="language-shell">curl --request DELETE --header &quot;PRIVATE-TOKEN: &lt;your_access_token&gt;&quot; &quot;https://gitlab.example.com/api/v4/groups/345/service_accounts/181&quot;
</code></pre>
<h3>List all personal access tokens for a group service account</h3>
<p>{{&lt; history &gt;}}</p>
<ul>
<li><a href="https://gitlab.com/gitlab-org/gitlab/-/issues/526924">Introduced</a> in GitLab 17.11.</li>
</ul>
<p>{{&lt; /history &gt;}}</p>
<p>Lists all personal access tokens for a service account in a top-level group.</p>
<pre><code class="language-plaintext">GET /groups/:id/service_accounts/:user_id/personal_access_tokens
</code></pre>
<p>Supported attributes:</p>
<table>
<thead>
<tr>
<th>Attribute</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>id</code></td>
<td>integer or string</td>
<td>yes</td>
<td>ID or <a href="rest/_index.md#namespaced-paths">URL-encoded path</a> of a top-level group.</td>
</tr>
<tr>
<td><code>user_id</code></td>
<td>integer</td>
<td>yes</td>
<td>ID of service account.</td>
</tr>
<tr>
<td><code>created_after</code></td>
<td>datetime (ISO 8601)</td>
<td>no</td>
<td>If defined, returns tokens created after the specified time.</td>
</tr>
<tr>
<td><code>created_before</code></td>
<td>datetime (ISO 8601)</td>
<td>no</td>
<td>If defined, returns tokens created before the specified time.</td>
</tr>
<tr>
<td><code>expires_after</code></td>
<td>date (ISO 8601)</td>
<td>no</td>
<td>If defined, returns tokens that expire after the specified time.</td>
</tr>
<tr>
<td><code>expires_before</code></td>
<td>date (ISO 8601)</td>
<td>no</td>
<td>If defined, returns tokens that expire before the specified time.</td>
</tr>
<tr>
<td><code>last_used_after</code></td>
<td>datetime (ISO 8601)</td>
<td>no</td>
<td>If defined, returns tokens last used after the specified time.</td>
</tr>
<tr>
<td><code>last_used_before</code></td>
<td>datetime (ISO 8601)</td>
<td>no</td>
<td>If defined, returns tokens last used before the specified time.</td>
</tr>
<tr>
<td><code>revoked</code></td>
<td>boolean</td>
<td>no</td>
<td>If <code>true</code>, only returns revoked tokens.</td>
</tr>
<tr>
<td><code>search</code></td>
<td>string</td>
<td>no</td>
<td>If defined, returns tokens that include the specified value in the name.</td>
</tr>
<tr>
<td><code>sort</code></td>
<td>string</td>
<td>no</td>
<td>If defined, sorts the results by the specified value. Possible values: <code>created_asc</code>, <code>created_desc</code>, <code>expires_asc</code>, <code>expires_desc</code>, <code>last_used_asc</code>, <code>last_used_desc</code>, <code>name_asc</code>, <code>name_desc</code>.</td>
</tr>
<tr>
<td><code>state</code></td>
<td>string</td>
<td>no</td>
<td>If defined, returns tokens with the specified state. Possible values: <code>active</code> and <code>inactive</code>.</td>
</tr>
</tbody>
</table>
<p>Example request:</p>
<pre><code class="language-shell">curl --request GET \
  --header &quot;PRIVATE-TOKEN: &lt;your_access_token&gt;&quot; \
  --url &quot;https://gitlab.example.com/api/v4/groups/187/service_accounts/195/personal_access_tokens?sort=id_desc&amp;search=token2b&amp;created_before=2025-03-27&quot;
</code></pre>
<p>Example response:</p>
<pre><code class="language-json">[
    {
        &quot;id&quot;: 187,
        &quot;name&quot;: &quot;service_accounts_token2b&quot;,
        &quot;revoked&quot;: false,
        &quot;created_at&quot;: &quot;2025-03-26T14:42:51.084Z&quot;,
        &quot;description&quot;: null,
        &quot;scopes&quot;: [
            &quot;api&quot;
        ],
        &quot;user_id&quot;: 195,
        &quot;last_used_at&quot;: null,
        &quot;active&quot;: true,
        &quot;expires_at&quot;: null
    }
]
</code></pre>
<p>Example of unsuccessful responses:</p>
<ul>
<li><code>401: Unauthorized</code></li>
<li><code>404 Group Not Found</code></li>
</ul>
<h3>Create a personal access token for a group service account</h3>
<p>{{&lt; history &gt;}}</p>
<ul>
<li><a href="https://gitlab.com/gitlab-org/gitlab/-/issues/406781">Introduced</a> in GitLab 16.1.</li>
</ul>
<p>{{&lt; /history &gt;}}</p>
<p>Creates a personal access token for an existing service account in a specified top-level group.</p>
<pre><code class="language-plaintext">POST /groups/:id/service_accounts/:user_id/personal_access_tokens
</code></pre>
<p>Parameters:</p>
<table>
<thead>
<tr>
<th>Attribute</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>id</code></td>
<td>integer or string</td>
<td>yes</td>
<td>ID or <a href="rest/_index.md#namespaced-paths">URL-encoded path</a> of a top-level group.</td>
</tr>
<tr>
<td><code>user_id</code></td>
<td>integer</td>
<td>yes</td>
<td>ID of service account.</td>
</tr>
<tr>
<td><code>name</code></td>
<td>string</td>
<td>yes</td>
<td>Name of personal access token.</td>
</tr>
<tr>
<td><code>description</code></td>
<td>string</td>
<td>no</td>
<td>Description of personal access token.</td>
</tr>
<tr>
<td><code>scopes</code></td>
<td>array</td>
<td>yes</td>
<td>Array of approved scopes. For a list of possible values, see <a href="../user/profile/personal_access_tokens.md#personal-access-token-scopes">Personal access token scopes</a>.</td>
</tr>
<tr>
<td><code>expires_at</code></td>
<td>date</td>
<td>no</td>
<td>Expiration date of the access token in ISO format (<code>YYYY-MM-DD</code>). If not specified, the date is set to the <a href="../user/profile/personal_access_tokens.md#access-token-expiration">maximum allowable lifetime limit</a>.</td>
</tr>
</tbody>
</table>
<p>Example request:</p>
<pre><code class="language-shell">curl --request POST --header &quot;PRIVATE-TOKEN: &lt;your_access_token&gt;&quot; &quot;https://gitlab.example.com/api/v4/groups/35/service_accounts/71/personal_access_tokens&quot; --data &quot;scopes[]=api,read_user,read_repository&quot; --data &quot;name=service_accounts_token&quot;
</code></pre>
<p>Example response:</p>
<pre><code class="language-json">{
  &quot;id&quot;:6,
  &quot;name&quot;:&quot;service_accounts_token&quot;,
  &quot;revoked&quot;:false,
  &quot;created_at&quot;:&quot;2023-06-13T07:47:13.900Z&quot;,
  &quot;scopes&quot;:[&quot;api&quot;],
  &quot;user_id&quot;:71,
  &quot;last_used_at&quot;:null,
  &quot;active&quot;:true,
  &quot;expires_at&quot;:&quot;2024-06-12&quot;,
  &quot;token&quot;:&quot;&lt;token_value&gt;&quot;
}
</code></pre>
<h3>Revoke a personal access token for a group service account</h3>
<p>{{&lt; history &gt;}}</p>
<ul>
<li><a href="https://gitlab.com/gitlab-org/gitlab/-/merge_requests/184287">Introduced</a> in GitLab 17.11</li>
</ul>
<p>{{&lt; /history &gt;}}</p>
<p>Revokes a personal access token for an existing service account in a specified top-level group.</p>
<p>{{&lt; alert type="note" &gt;}}</p>
<p>This endpoint only works on top-level groups.</p>
<p>{{&lt; /alert &gt;}}</p>
<pre><code class="language-plaintext">DELETE /groups/:id/service_accounts/:user_id/personal_access_tokens/:token_id
</code></pre>
<p>Parameters:</p>
<table>
<thead>
<tr>
<th>Attribute</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>id</code></td>
<td>integer or string</td>
<td>yes</td>
<td>The ID or <a href="rest/_index.md#namespaced-paths">URL-encoded path of the target group</a>.</td>
</tr>
<tr>
<td><code>user_id</code></td>
<td>integer</td>
<td>yes</td>
<td>The ID of the service account.</td>
</tr>
<tr>
<td><code>token_id</code></td>
<td>integer</td>
<td>yes</td>
<td>The ID of the token.</td>
</tr>
</tbody>
</table>
<p>Example request:</p>
<pre><code class="language-shell">curl --request DELETE --header &quot;PRIVATE-TOKEN: &lt;your_access_token&gt;&quot; &quot;https://gitlab.example.com/api/v4/groups/35/service_accounts/71/personal_access_tokens/6&quot;
</code></pre>
<p>If successful, returns <code>204: No Content</code>.</p>
<p>Other possible responses:</p>
<ul>
<li><code>400: Bad Request</code> if not revoked successfully.</li>
<li><code>401: Unauthorized</code> if the request is not authorized.</li>
<li><code>403: Forbidden</code> if the request is not allowed.</li>
<li><code>404: Not Found</code> if the access token does not exist.</li>
</ul>
<h3>Rotate a personal access token for a group service account</h3>
<p>{{&lt; history &gt;}}</p>
<ul>
<li><a href="https://gitlab.com/gitlab-org/gitlab/-/issues/406781">Introduced</a> in GitLab 16.1.</li>
</ul>
<p>{{&lt; /history &gt;}}</p>
<p>Rotates a personal access token for an existing service account in a specified top-level group. This creates a new token valid for one week and revokes any existing tokens.</p>
<p>{{&lt; alert type="note" &gt;}}</p>
<p>This endpoint only works on top-level groups.</p>
<p>{{&lt; /alert &gt;}}</p>
<pre><code class="language-plaintext">POST /groups/:id/service_accounts/:user_id/personal_access_tokens/:token_id/rotate
</code></pre>
<p>Parameters:</p>
<table>
<thead>
<tr>
<th>Attribute</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>id</code></td>
<td>integer or string</td>
<td>yes</td>
<td>The ID or <a href="rest/_index.md#namespaced-paths">URL-encoded path of the target group</a>.</td>
</tr>
<tr>
<td><code>user_id</code></td>
<td>integer</td>
<td>yes</td>
<td>The ID of the service account.</td>
</tr>
<tr>
<td><code>token_id</code></td>
<td>integer</td>
<td>yes</td>
<td>The ID of the token.</td>
</tr>
<tr>
<td><code>expires_at</code></td>
<td>date</td>
<td>no</td>
<td>Expiration date of the access token in ISO format (<code>YYYY-MM-DD</code>). <a href="https://gitlab.com/gitlab-org/gitlab/-/issues/505671">Introduced</a> in GitLab 17.9. If the token requires an expiration date, defaults to one week. If not required, defaults to the <a href="../user/profile/personal_access_tokens.md#access-token-expiration">maximum allowable lifetime limit</a>.</td>
</tr>
</tbody>
</table>
<p>Example request:</p>
<pre><code class="language-shell">curl --request POST --header &quot;PRIVATE-TOKEN: &lt;your_access_token&gt;&quot; &quot;https://gitlab.example.com/api/v4/groups/35/service_accounts/71/personal_access_tokens/6/rotate&quot;
</code></pre>
<p>Example response:</p>
<pre><code class="language-json">{
  &quot;id&quot;:7,
  &quot;name&quot;:&quot;service_accounts_token&quot;,
  &quot;revoked&quot;:false,
  &quot;created_at&quot;:&quot;2023-06-13T07:54:49.962Z&quot;,
  &quot;scopes&quot;:[&quot;api&quot;],
  &quot;user_id&quot;:71,
  &quot;last_used_at&quot;:null,
  &quot;active&quot;:true,
  &quot;expires_at&quot;:&quot;2023-06-20&quot;,
  &quot;token&quot;:&quot;&lt;token_value&gt;&quot;
}
</code></pre></code></pre>
</body>
</html>
