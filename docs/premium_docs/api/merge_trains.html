<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title># List Merge Trains for a project</title>
    <link rel="stylesheet" href="/../style.css">
</head>
<body>
    <pre><code><hr />
<p>stage: Verify
group: Pipeline Execution
info: To determine the technical writer assigned to the Stage/Group associated with this page, see https://handbook.gitlab.com/handbook/product/ux/technical-writing/#assignments
title: Merge Trains API</p>
<hr />
<p>{{&lt; details &gt;}}</p>
<ul>
<li>Tier: Premium, Ultimate</li>
<li>Offering: GitLab.com, GitLab Self-Managed, GitLab Dedicated</li>
</ul>
<p>{{&lt; /details &gt;}}</p>
<p>Use this API to interact with <a href="../ci/pipelines/merge_trains.html">merge trains</a>.</p>
<p>Prerequisites:</p>
<ul>
<li>You must have at least the Developer role.</li>
</ul>
<h2>List Merge Trains for a project</h2>
<p>Get all Merge Trains of the requested project:</p>
<pre><code class="language-plaintext">GET /projects/:id/merge_trains
GET /projects/:id/merge_trains?scope=complete
</code></pre>
<p>Use the <code>page</code> and <code>per_page</code> <a href="rest/_index.md#offset-based-pagination">pagination</a> parameters to
control the pagination of results.</p>
<table>
<thead>
<tr>
<th>Attribute</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>id</code></td>
<td>integer or string</td>
<td>Yes</td>
<td>The ID or <a href="rest/_index.md#namespaced-paths">URL-encoded path of the project</a>.</td>
</tr>
<tr>
<td><code>scope</code></td>
<td>string</td>
<td>No</td>
<td>Return Merge Trains filtered by the given scope. Available scopes are <code>active</code> (to be merged) and <code>complete</code> (have been merged).</td>
</tr>
<tr>
<td><code>sort</code></td>
<td>string</td>
<td>No</td>
<td>Return Merge Trains sorted in <code>asc</code> or <code>desc</code> order. Default: <code>desc</code>.</td>
</tr>
</tbody>
</table>
<pre><code class="language-shell">curl --request GET \
  --header &quot;PRIVATE-TOKEN: &lt;your_access_token&gt;&quot; \
  --url &quot;https://gitlab.example.com/api/v4/projects/1/merge_trains&quot;
</code></pre>
<p>Returns:</p>
<ul>
<li><code>403: Forbidden</code> if Merge Trains are not available for the project</li>
<li><code>404: Not Found</code> if the user is not a member of a private project</li>
</ul>
<p>Example response:</p>
<pre><code class="language-json">[
  {
    &quot;id&quot;: 110,
    &quot;merge_request&quot;: {
      &quot;id&quot;: 126,
      &quot;iid&quot;: 59,
      &quot;project_id&quot;: 20,
      &quot;title&quot;: &quot;Test MR 1580978354&quot;,
      &quot;description&quot;: &quot;&quot;,
      &quot;state&quot;: &quot;merged&quot;,
      &quot;created_at&quot;: &quot;2020-02-06T08:39:14.883Z&quot;,
      &quot;updated_at&quot;: &quot;2020-02-06T08:40:57.038Z&quot;,
      &quot;web_url&quot;: &quot;http://local.gitlab.test:8181/root/merge-train-race-condition/-/merge_requests/59&quot;
    },
    &quot;user&quot;: {
      &quot;id&quot;: 1,
      &quot;name&quot;: &quot;Administrator&quot;,
      &quot;username&quot;: &quot;root&quot;,
      &quot;state&quot;: &quot;active&quot;,
      &quot;avatar_url&quot;: &quot;https://www.gravatar.com/avatar/e64c7d89f26bd1972efa854d13d7dd61?s=80&amp;d=identicon&quot;,
      &quot;web_url&quot;: &quot;http://local.gitlab.test:8181/root&quot;
    },
    &quot;pipeline&quot;: {
      &quot;id&quot;: 246,
      &quot;sha&quot;: &quot;bcc17a8ffd51be1afe45605e714085df28b80b13&quot;,
      &quot;ref&quot;: &quot;refs/merge-requests/59/train&quot;,
      &quot;status&quot;: &quot;success&quot;,
      &quot;created_at&quot;: &quot;2020-02-06T08:40:42.410Z&quot;,
      &quot;updated_at&quot;: &quot;2020-02-06T08:40:46.912Z&quot;,
      &quot;web_url&quot;: &quot;http://local.gitlab.test:8181/root/merge-train-race-condition/pipelines/246&quot;
    },
    &quot;created_at&quot;: &quot;2020-02-06T08:39:47.217Z&quot;,
    &quot;updated_at&quot;: &quot;2020-02-06T08:40:57.720Z&quot;,
    &quot;target_branch&quot;: &quot;feature-1580973432&quot;,
    &quot;status&quot;: &quot;merged&quot;,
    &quot;merged_at&quot;: &quot;2020-02-06T08:40:57.719Z&quot;,
    &quot;duration&quot;: 70
  }
]
</code></pre>
<h2>List merge requests in a merge train</h2>
<p>Get all merge requests added to a merge train for the requested target branch.</p>
<pre><code class="language-plaintext">GET /projects/:id/merge_trains/:target_branch
</code></pre>
<p>Use the <code>page</code> and <code>per_page</code> <a href="rest/_index.md#offset-based-pagination">pagination</a> parameters to
control the pagination of results.</p>
<p>Supported attributes:</p>
<table>
<thead>
<tr>
<th>Attribute</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>id</code></td>
<td>integer or string</td>
<td>Yes</td>
<td>The ID or <a href="rest/_index.md#namespaced-paths">URL-encoded path of the project</a>.</td>
</tr>
<tr>
<td><code>target_branch</code></td>
<td>string</td>
<td>Yes</td>
<td>The target branch of the merge train.</td>
</tr>
<tr>
<td><code>scope</code></td>
<td>string</td>
<td>No</td>
<td>Return Merge Trains filtered by the given scope. Available scopes are <code>active</code> (to be merged) and <code>complete</code> (have been merged).</td>
</tr>
<tr>
<td><code>sort</code></td>
<td>string</td>
<td>No</td>
<td>Return Merge Trains sorted in <code>asc</code> or <code>desc</code> order. Default: <code>desc</code>.</td>
</tr>
</tbody>
</table>
<p>Example request:</p>
<pre><code class="language-shell">curl --request GET \
  --header &quot;PRIVATE-TOKEN: &lt;your_access_token&gt;&quot; \
  --url &quot;https://gitlab.example.com/api/v4/projects/597/merge_trains/main&quot;
</code></pre>
<p>Returns:</p>
<ul>
<li><code>403: Forbidden</code> if Merge Trains are not available for the project</li>
<li><code>404: Not Found</code> if the user is not a member of a private project</li>
</ul>
<p>Example response:</p>
<pre><code class="language-json">[
  {
    &quot;id&quot;: 267,
    &quot;merge_request&quot;: {
      &quot;id&quot;: 273,
      &quot;iid&quot;: 1,
      &quot;project_id&quot;: 597,
      &quot;title&quot;: &quot;My title 9&quot;,
      &quot;description&quot;: null,
      &quot;state&quot;: &quot;opened&quot;,
      &quot;created_at&quot;: &quot;2022-10-31T19:06:05.725Z&quot;,
      &quot;updated_at&quot;: &quot;2022-10-31T19:06:05.725Z&quot;,
      &quot;web_url&quot;: &quot;http://localhost/namespace18/project21/-/merge_requests/1&quot;
    },
    &quot;user&quot;: {
      &quot;id&quot;: 933,
      &quot;username&quot;: &quot;user12&quot;,
      &quot;name&quot;: &quot;Sidney Jones31&quot;,
      &quot;state&quot;: &quot;active&quot;,
      &quot;avatar_url&quot;: &quot;https://www.gravatar.com/avatar/6c8365de387cb3db10ecc7b1880203c4?s=80\u0026d=identicon&quot;,
      &quot;web_url&quot;: &quot;http://localhost/user12&quot;
    },
    &quot;pipeline&quot;: {
      &quot;id&quot;: 273,
      &quot;iid&quot;: 1,
      &quot;project_id&quot;: 598,
      &quot;sha&quot;: &quot;b83d6e391c22777fca1ed3012fce84f633d7fed0&quot;,
      &quot;ref&quot;: &quot;main&quot;,
      &quot;status&quot;: &quot;pending&quot;,
      &quot;source&quot;: &quot;push&quot;,
      &quot;created_at&quot;: &quot;2022-10-31T19:06:06.231Z&quot;,
      &quot;updated_at&quot;: &quot;2022-10-31T19:06:06.231Z&quot;,
      &quot;web_url&quot;: &quot;http://localhost/namespace19/project22/-/pipelines/273&quot;
    },
    &quot;created_at&quot;: &quot;2022-10-31T19:06:06.237Z&quot;,
    &quot;updated_at&quot;:&quot;2022-10-31T19:06:06.237Z&quot;,
    &quot;target_branch&quot;:&quot;main&quot;,
    &quot;status&quot;:&quot;idle&quot;,
    &quot;merged_at&quot;:null,
    &quot;duration&quot;:null
  }
]
</code></pre>
<h2>Get the status of a merge request on a merge train</h2>
<p>Get merge train information for the requested merge request.</p>
<pre><code class="language-plaintext">GET /projects/:id/merge_trains/merge_requests/:merge_request_iid
</code></pre>
<p>Use the <code>page</code> and <code>per_page</code> <a href="rest/_index.md#offset-based-pagination">pagination</a> parameters to
control the pagination of results.</p>
<p>Supported attributes:</p>
<table>
<thead>
<tr>
<th>Attribute</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>id</code></td>
<td>integer or string</td>
<td>Yes</td>
<td>The ID or <a href="rest/_index.md#namespaced-paths">URL-encoded path of the project</a>.</td>
</tr>
<tr>
<td><code>merge_request_iid</code></td>
<td>integer</td>
<td>Yes</td>
<td>The internal ID of the merge request.</td>
</tr>
</tbody>
</table>
<p>Example request:</p>
<pre><code class="language-shell">curl --request GET \
  --header &quot;PRIVATE-TOKEN: &lt;your_access_token&gt;&quot; \
  --url &quot;https://gitlab.example.com/api/v4/projects/597/merge_trains/merge_requests/1&quot;
</code></pre>
<p>Returns:</p>
<ul>
<li><code>403: Forbidden</code> if Merge Trains are not available for the project</li>
<li><code>404: Not Found</code> if the user is not a member of a private project</li>
</ul>
<p>Example response:</p>
<pre><code class="language-json">{
  &quot;id&quot;: 267,
  &quot;merge_request&quot;: {
    &quot;id&quot;: 273,
    &quot;iid&quot;: 1,
    &quot;project_id&quot;: 597,
    &quot;title&quot;: &quot;My title 9&quot;,
    &quot;description&quot;: null,
    &quot;state&quot;: &quot;opened&quot;,
    &quot;created_at&quot;: &quot;2022-10-31T19:06:05.725Z&quot;,
    &quot;updated_at&quot;: &quot;2022-10-31T19:06:05.725Z&quot;,
    &quot;web_url&quot;: &quot;http://localhost/namespace18/project21/-/merge_requests/1&quot;
  },
  &quot;user&quot;: {
    &quot;id&quot;: 933,
    &quot;username&quot;: &quot;user12&quot;,
    &quot;name&quot;: &quot;Sidney Jones31&quot;,
    &quot;state&quot;: &quot;active&quot;,
    &quot;avatar_url&quot;: &quot;https://www.gravatar.com/avatar/6c8365de387cb3db10ecc7b1880203c4?s=80\u0026d=identicon&quot;,
    &quot;web_url&quot;: &quot;http://localhost/user12&quot;
  },
  &quot;pipeline&quot;: {
    &quot;id&quot;: 273,
    &quot;iid&quot;: 1,
    &quot;project_id&quot;: 598,
    &quot;sha&quot;: &quot;b83d6e391c22777fca1ed3012fce84f633d7fed0&quot;,
    &quot;ref&quot;: &quot;main&quot;,
    &quot;status&quot;: &quot;pending&quot;,
    &quot;source&quot;: &quot;push&quot;,
    &quot;created_at&quot;: &quot;2022-10-31T19:06:06.231Z&quot;,
    &quot;updated_at&quot;: &quot;2022-10-31T19:06:06.231Z&quot;,
    &quot;web_url&quot;: &quot;http://localhost/namespace19/project22/-/pipelines/273&quot;
  },
  &quot;created_at&quot;: &quot;2022-10-31T19:06:06.237Z&quot;,
  &quot;updated_at&quot;:&quot;2022-10-31T19:06:06.237Z&quot;,
  &quot;target_branch&quot;:&quot;main&quot;,
  &quot;status&quot;:&quot;idle&quot;,
  &quot;merged_at&quot;:null,
  &quot;duration&quot;:null
}
</code></pre>
<h2>Add a merge request to a merge train</h2>
<p>Add a merge request to the merge train targeting the merge request's target branch.</p>
<pre><code class="language-plaintext">POST /projects/:id/merge_trains/merge_requests/:merge_request_iid
</code></pre>
<p>Supported attributes:</p>
<table>
<thead>
<tr>
<th>Attribute</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>id</code></td>
<td>integer or string</td>
<td>Yes</td>
<td>The ID or <a href="rest/_index.md#namespaced-paths">URL-encoded path of the project</a>.</td>
</tr>
<tr>
<td><code>merge_request_iid</code></td>
<td>integer</td>
<td>Yes</td>
<td>The internal ID of the merge request.</td>
</tr>
<tr>
<td><code>auto_merge</code></td>
<td>boolean</td>
<td>No</td>
<td>If true, the merge request is added to the merge train when the checks pass. When false or unspecified, the merge request is added directly to the merge train.</td>
</tr>
<tr>
<td><code>sha</code></td>
<td>string</td>
<td>No</td>
<td>If present, the SHA must match the <code>HEAD</code> of the source branch, otherwise the merge fails.</td>
</tr>
<tr>
<td><code>squash</code></td>
<td>boolean</td>
<td>No</td>
<td>If true, the commits are squashed into a single commit on merge.</td>
</tr>
<tr>
<td><code>when_pipeline_succeeds</code></td>
<td>boolean</td>
<td>No</td>
<td><a href="https://gitlab.com/gitlab-org/gitlab/-/issues/521290">Deprecated</a> in GitLab 17.11. Use <code>auto_merge</code> instead.</td>
</tr>
</tbody>
</table>
<p>Example request:</p>
<pre><code class="language-shell">curl --request POST \
  --header &quot;PRIVATE-TOKEN: &lt;your_access_token&gt;&quot; \
  --url &quot;https://gitlab.example.com/api/v4/projects/597/merge_trains/merge_requests/1&quot;
</code></pre>
<p>If successful, returns:</p>
<ul>
<li><code>201 Created</code> if the merge request is immediately added to the merge train</li>
<li><code>202 Accepted</code> if the merge request is scheduled to be added to the merge train</li>
</ul>
<p>Other possible responses:</p>
<ul>
<li><code>400 Bad Request</code> if the merge failed</li>
<li><code>401 Unauthorized</code> if authentication is required</li>
<li><code>403 Forbidden</code> if merge trains are not available for the project</li>
<li><code>404 Not Found</code> if the project or merge request is not found</li>
<li><code>409 Conflict</code> if there's a conflicting resource</li>
</ul>
<p>On success, the response contains the following attributes:</p>
<table>
<thead>
<tr>
<th>Attribute</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>created_at</code></td>
<td>datetime</td>
<td>Timestamp of when the merge train was created.</td>
</tr>
<tr>
<td><code>duration</code></td>
<td>integer</td>
<td>Duration in seconds, or <code>null</code> if not completed.</td>
</tr>
<tr>
<td><code>id</code></td>
<td>integer</td>
<td>ID of the merge train.</td>
</tr>
<tr>
<td><code>merge_request</code></td>
<td>object</td>
<td>Merge request details.</td>
</tr>
<tr>
<td><code>merge_request.created_at</code></td>
<td>datetime</td>
<td>Timestamp of when the merge request was created.</td>
</tr>
<tr>
<td><code>merge_request.description</code></td>
<td>string</td>
<td>Description of the merge request.</td>
</tr>
<tr>
<td><code>merge_request.id</code></td>
<td>integer</td>
<td>ID of the merge request.</td>
</tr>
<tr>
<td><code>merge_request.iid</code></td>
<td>integer</td>
<td>Internal ID of the merge request.</td>
</tr>
<tr>
<td><code>merge_request.project_id</code></td>
<td>integer</td>
<td>ID of the project containing the merge request.</td>
</tr>
<tr>
<td><code>merge_request.state</code></td>
<td>string</td>
<td>State of the merge request.</td>
</tr>
<tr>
<td><code>merge_request.title</code></td>
<td>string</td>
<td>Title of the merge request.</td>
</tr>
<tr>
<td><code>merge_request.updated_at</code></td>
<td>datetime</td>
<td>Timestamp of when the merge request was last updated.</td>
</tr>
<tr>
<td><code>merge_request.web_url</code></td>
<td>string</td>
<td>Web URL of the merge request.</td>
</tr>
<tr>
<td><code>merged_at</code></td>
<td>datetime</td>
<td>Timestamp of when the merge request merged, or <code>null</code> if not merged.</td>
</tr>
<tr>
<td><code>pipeline</code></td>
<td>object</td>
<td>Pipeline details.</td>
</tr>
<tr>
<td><code>pipeline.created_at</code></td>
<td>datetime</td>
<td>Timestamp of when the pipeline was created.</td>
</tr>
<tr>
<td><code>pipeline.id</code></td>
<td>integer</td>
<td>ID of the pipeline.</td>
</tr>
<tr>
<td><code>pipeline.iid</code></td>
<td>integer</td>
<td>Internal ID of the pipeline.</td>
</tr>
<tr>
<td><code>pipeline.project_id</code></td>
<td>integer</td>
<td>ID of the project containing the pipeline.</td>
</tr>
<tr>
<td><code>pipeline.ref</code></td>
<td>string</td>
<td>Git reference of the pipeline.</td>
</tr>
<tr>
<td><code>pipeline.sha</code></td>
<td>string</td>
<td>SHA of the commit that triggered the pipeline.</td>
</tr>
<tr>
<td><code>pipeline.source</code></td>
<td>string</td>
<td>Source of the pipeline trigger.</td>
</tr>
<tr>
<td><code>pipeline.status</code></td>
<td>string</td>
<td>Status of the pipeline.</td>
</tr>
<tr>
<td><code>pipeline.updated_at</code></td>
<td>datetime</td>
<td>Timestamp of when the pipeline was last updated.</td>
</tr>
<tr>
<td><code>pipeline.web_url</code></td>
<td>string</td>
<td>Web URL of the pipeline.</td>
</tr>
<tr>
<td><code>status</code></td>
<td>string</td>
<td>Status of the merge train. Possible values: <code>idle</code>, <code>merged</code>, <code>stale</code>, <code>fresh</code>, <code>merging</code>, <code>skip_merged</code>.</td>
</tr>
<tr>
<td><code>target_branch</code></td>
<td>string</td>
<td>Name of the target branch.</td>
</tr>
<tr>
<td><code>updated_at</code></td>
<td>datetime</td>
<td>Timestamp of when the merge train was last updated.</td>
</tr>
<tr>
<td><code>user</code></td>
<td>object</td>
<td>User who added the merge request to the merge train.</td>
</tr>
<tr>
<td><code>user.avatar_url</code></td>
<td>string</td>
<td>Avatar URL of the user.</td>
</tr>
<tr>
<td><code>user.id</code></td>
<td>integer</td>
<td>ID of the user.</td>
</tr>
<tr>
<td><code>user.name</code></td>
<td>string</td>
<td>Name of the user.</td>
</tr>
<tr>
<td><code>user.state</code></td>
<td>string</td>
<td>State of the user account.</td>
</tr>
<tr>
<td><code>user.username</code></td>
<td>string</td>
<td>Username of the user.</td>
</tr>
<tr>
<td><code>user.web_url</code></td>
<td>string</td>
<td>Web URL of the user profile.</td>
</tr>
</tbody>
</table>
<p>Example response:</p>
<pre><code class="language-json">[
  {
    &quot;id&quot;: 267,
    &quot;merge_request&quot;: {
      &quot;id&quot;: 273,
      &quot;iid&quot;: 1,
      &quot;project_id&quot;: 597,
      &quot;title&quot;: &quot;My title 9&quot;,
      &quot;description&quot;: null,
      &quot;state&quot;: &quot;opened&quot;,
      &quot;created_at&quot;: &quot;2022-10-31T19:06:05.725Z&quot;,
      &quot;updated_at&quot;: &quot;2022-10-31T19:06:05.725Z&quot;,
      &quot;web_url&quot;: &quot;http://localhost/namespace18/project21/-/merge_requests/1&quot;
    },
    &quot;user&quot;: {
      &quot;id&quot;: 933,
      &quot;username&quot;: &quot;user12&quot;,
      &quot;name&quot;: &quot;Sidney Jones31&quot;,
      &quot;state&quot;: &quot;active&quot;,
      &quot;avatar_url&quot;: &quot;https://www.gravatar.com/avatar/6c8365de387cb3db10ecc7b1880203c4?s=80\u0026d=identicon&quot;,
      &quot;web_url&quot;: &quot;http://localhost/user12&quot;
    },
    &quot;pipeline&quot;: {
      &quot;id&quot;: 273,
      &quot;iid&quot;: 1,
      &quot;project_id&quot;: 598,
      &quot;sha&quot;: &quot;b83d6e391c22777fca1ed3012fce84f633d7fed0&quot;,
      &quot;ref&quot;: &quot;main&quot;,
      &quot;status&quot;: &quot;pending&quot;,
      &quot;source&quot;: &quot;push&quot;,
      &quot;created_at&quot;: &quot;2022-10-31T19:06:06.231Z&quot;,
      &quot;updated_at&quot;: &quot;2022-10-31T19:06:06.231Z&quot;,
      &quot;web_url&quot;: &quot;http://localhost/namespace19/project22/-/pipelines/273&quot;
    },
    &quot;created_at&quot;: &quot;2022-10-31T19:06:06.237Z&quot;,
    &quot;updated_at&quot;:&quot;2022-10-31T19:06:06.237Z&quot;,
    &quot;target_branch&quot;:&quot;main&quot;,
    &quot;status&quot;:&quot;idle&quot;,
    &quot;merged_at&quot;:null,
    &quot;duration&quot;:null
  }
]
</code></pre></code></pre>
</body>
</html>
