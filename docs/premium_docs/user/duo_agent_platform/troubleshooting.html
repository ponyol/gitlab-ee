<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title># View logs</title>
    <link rel="stylesheet" href="/../../style.css">
</head>
<body>
    <pre><code><hr />
<p>stage: AI-powered
group: Agent Foundations
info: To determine the technical writer assigned to the Stage/Group associated with this page, see https://handbook.gitlab.com/handbook/product/ux/technical-writing/#assignments
title: Troubleshooting the GitLab Duo Agent Platform</p>
<hr />
<p>{{&lt; details &gt;}}</p>
<ul>
<li>Tier: Premium, Ultimate</li>
<li>Add-on: GitLab Duo Core, Pro, or Enterprise</li>
<li>Offering: GitLab.com, GitLab Self-Managed, GitLab Dedicated</li>
<li>Status: Beta</li>
</ul>
<p>{{&lt; /details &gt;}}</p>
<p>If you are working with the GitLab Duo Agent Platform,
you might encounter the following issues.</p>
<h2>View logs</h2>
<p>After a flow is created, you can view the flow's session by going to <strong>Automate</strong> &gt; <strong>Sessions</strong>.</p>
<p>The <strong>Details</strong> tab shows a link to the CI/CD job logs.
These logs can contain troubleshooting information.</p>
<h2>Flows not visible in the UI</h2>
<p>If you are trying to run a flow but it's not visible in the GitLab UI:</p>
<ol>
<li>Ensure you have at least Developer role in the project.</li>
<li>Ensure GitLab Duo is <a href="../gitlab_duo/turn_on_off.html">turned on and flows are allowed to execute</a>.</li>
<li>Ensure the required feature flags are enabled for the flow you're trying to use.
   For the latest flag information, check the documentation history for the feature.</li>
</ol>
<h2>Session is stuck in created state</h2>
<p>If a session for your flow does not start:</p>
<ul>
<li>Ensure you're not preventing members from being added to projects.</li>
<li>Ensure push rules are configured.</li>
</ul>
<h3>Allow members to be added to projects</h3>
<p>Flows that use a <a href="security.html">composite identity</a> need to add the <code>@duo-developer</code>
service account to your project. If your group is restricted, you cannot add users directly to projects,
and your flows will not run.</p>
<p>Prior to running a flow in your project, turn off the setting that
<a href="../group/access_and_permissions.md#prevent-members-from-being-added-to-projects-in-a-group">prevents members from being added to projects</a>.
This step only needs to be done one time, for the first flow to run.
After that, you can turn the setting back on.</p>
<h3>Configure push rules to allow a service account</h3>
<p>In the GitLab UI, foundational flows use a service account that:</p>
<ul>
<li>Creates commits with its own email address.</li>
<li>Creates branches with the <code>workloads/</code> prefix (for example, <code>workloads/a1b2c3d4e5f</code>).</li>
</ul>
<p>To configure push rules for a project:</p>
<ol>
<li>Find the email address associated with the service account:</li>
<li>On the left sidebar, at the bottom, select <strong>Admin</strong>.</li>
<li>Select <strong>Overview</strong> &gt; <strong>Users</strong> and search for <code>duo-developer</code>.</li>
<li>
<p>Locate the <code>duo-developer</code> user and copy the email address.</p>
</li>
<li>
<p>Allow the email address to push to the project:</p>
</li>
<li>On the left sidebar, select <strong>Search or go to</strong> and find your project.</li>
<li>Select <strong>Settings</strong> &gt; <strong>Repository</strong>.</li>
<li>Expand <strong>Push rules</strong>.</li>
<li>In <strong>Commit author's email</strong>, add a regular expression that allows the email address you just copied.</li>
<li>
<p>Select <strong>Save push rules</strong>.</p>
</li>
<li>
<p>Allow the <code>workloads/</code> branch prefix:</p>
</li>
<li>In the <strong>Push rules</strong> section, find <strong>Branch name</strong>.</li>
<li>Add a regular expression that allows branches starting with <code>workloads/</code>.
      For example: <code>^workloads/.*$</code></li>
<li>Select <strong>Save push rules</strong>.</li>
</ol>
<p>If you are an administrator, you can create push rules for the instance:</p>
<ol>
<li>On the left sidebar, at the bottom, select <strong>Admin</strong>.</li>
<li>Select <strong>Push rules</strong>.</li>
<li>Follow the previous steps to allow <strong>Commit author's email</strong> and <strong>Branch name</strong>.</li>
<li>Select <strong>Save push rules</strong>.</li>
</ol></code></pre>
</body>
</html>
