<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title># General guidance</title>
    <link rel="stylesheet" href="../../style.css">
</head>
<body>
    <pre><code><hr />
<p>stage: AI-powered
group: Agent Foundations
info: To determine the technical writer assigned to the Stage/Group associated with this page, see https://handbook.gitlab.com/handbook/product/ux/technical-writing/#assignments
title: Troubleshooting the Agent Platform in your IDE</p>
<hr />
<p>{{&lt; details &gt;}}</p>
<ul>
<li>Tier: Premium, Ultimate</li>
<li>Add-on: GitLab Duo Core, Pro, or Enterprise</li>
<li>Offering: GitLab.com, GitLab Self-Managed, GitLab Dedicated</li>
<li>Status: Beta</li>
</ul>
<p>{{&lt; /details &gt;}}</p>
<p>If you are working with the GitLab Duo Agent Platform in your IDE,
you might encounter the following issues.</p>
<h2>General guidance</h2>
<p>Start by ensuring that GitLab Duo is on and that you are properly connected.</p>
<ul>
<li>Ensure you meet <a href="_index.md#prerequisites">the prerequisites</a>.</li>
<li>Ensure the branch you want to work in is checked out.</li>
<li>Ensure you have turned on the necessary settings in the IDE.</li>
<li>Ensure that <a href="../../administration/settings/sign_in_restrictions.md#turn-off-admin-mode-for-your-session">Admin mode is disabled</a>.</li>
</ul>
<h2>Network issues</h2>
<p>If you are seeing <code>HTTP/1.1</code> responses from GitLab Duo rather than <code>/-/cable</code>
WebSocket endpoints in your logs, your WebSocket connections may be blocked.</p>
<p>Your GitLab instance must allow inbound WebSocket connections from IDE clients.
Ask your network administrator to
<a href="../../administration/gitlab_duo/setup.md#allow-inbound-connections-from-clients-to-the-gitlab-instance">allow WebSocket traffic to your GitLab instance</a>
if you suspect this is the issue.</p>
<h2>View debugging logs in VS Code</h2>
<p>In VS Code, you can troubleshoot some issues by viewing debugging logs.</p>
<ol>
<li>Open local debugging logs:</li>
<li>On macOS: <kbd>Command</kbd>+<kbd>,</kbd></li>
<li>On Windows and Linux: <kbd>Control</kbd>+<kbd>,</kbd></li>
<li>Search for the setting <strong>GitLab: Debug</strong> and enable it.</li>
<li>Open the language server logs:</li>
<li>In VS Code, select <strong>View</strong> &gt; <strong>Output</strong>.</li>
<li>In the output panel at the bottom, in the upper-right corner,
      select <strong>GitLab Workflow</strong> or <strong>GitLab Language Server</strong> from the list.</li>
<li>Review for errors, warnings, connection issues, or authentication problems.</li>
</ol>
<h2>VS Code configuration</h2>
<p>You can try several things to ensure your repository is properly configured and connected in VS Code.</p>
<h3>View the project in the GitLab Workflow extension</h3>
<p>Start by ensuring the correct project is selected in the GitLab Workflow extension for VS Code.</p>
<ol>
<li>In VS Code, on the left sidebar, select <strong>GitLab Workflow</strong> ({{&lt; icon name="tanuki" &gt;}}).</li>
<li>Ensure the project is listed and selected.</li>
</ol>
<p>If an error message appears next to the project name, select it to reveal what needs to be updated.</p>
<p>For example, you might have multiple repositories and need to select one, or there might be no repositories at all.</p>
<h4>No Git repository</h4>
<p>If your workspace doesn't have a Git repository initialized, you must create a new one:</p>
<ol>
<li>On the left sidebar, select <strong>Source Control</strong> ({{&lt; icon name="branch" &gt;}}).</li>
<li>Select <strong>Initialize Repository</strong>.</li>
</ol>
<p>When the repository is initialized, you should see the name in the <strong>Source Control</strong> view.</p>
<h4>Git repository with no GitLab remote</h4>
<p>You might have a Git repository but it's not properly connected to GitLab.</p>
<ol>
<li>On the left sidebar, select <strong>Source Control</strong> ({{&lt; icon name="branch" &gt;}}).</li>
<li>On the <strong>Source Control</strong> label, right-click and select <strong>Repositories</strong>.</li>
<li>Next to your repository, select the ellipsis ({{&lt; icon name=ellipsis_h &gt;}}), then <strong>Remote</strong> &gt; <strong>Add Remote</strong>.</li>
<li>Enter your GitLab project URL.</li>
<li>Select the newly added remote as your upstream.</li>
</ol>
<h4>Multiple GitLab remotes</h4>
<p>Your repository might have multiple GitLab remotes configured.
To select the correct one:</p>
<ol>
<li>On the left sidebar, select <strong>Source Control</strong> ({{&lt; icon name="branch" &gt;}}).</li>
<li>On the status bar, select the current remote name.</li>
<li>From the list, select the appropriate GitLab remote.</li>
<li>Ensure the selected remote belongs to a group namespace in GitLab.</li>
</ol>
<h4>Multiple GitLab projects</h4>
<p>If your VS Code workspace contains multiple GitLab projects, you might want
to close all the projects you're not using.</p>
<p>To close projects:</p>
<ol>
<li>On the left sidebar, select <strong>Source Control</strong> ({{&lt; icon name="branch" &gt;}}).</li>
<li>Ensure repositories are shown: on the <strong>Source Control</strong> label, right-click and select <strong>Repositories</strong>.</li>
<li>Right-click the repository you want to close and select <strong>Close Repository</strong>.</li>
</ol>
<h4>Git remote with SSH custom alias</h4>
<p>If your repository remote uses an SSH custom alias (for example, <code>git@my-work-gitlab:group/project.git</code> instead of <code>git@gitlab.com:group/project.git</code>), the GitLab Workflow extension might not correctly match your repository to your GitLab project.</p>
<p>To resolve this issue, you can:</p>
<ul>
<li>Change the remote to use SSH without a custom alias, or HTTP.</li>
<li>Configure the default namespace for the Agent Platform.</li>
</ul>
<p>To configure the default namespace:</p>
<ol>
<li><a href="../namespace/_index.md#determine-which-type-of-namespace-youre-in">Determine the namespace your project is in</a>.</li>
<li>In VS Code, select <strong>File</strong> &gt; <strong>Preferences</strong> &gt; <strong>Settings</strong>.</li>
<li>Search for <strong>GitLab</strong> &gt; <strong>Duo Agent Platform: Default Namespace</strong> and enter your namespace.</li>
</ol>
<h3>Project not in a group namespace</h3>
<p>GitLab Duo Agent Platform requires that projects belong to a group namespace.</p>
<p>To determine the namespace your project is in, <a href="../namespace/_index.md#determine-which-type-of-namespace-youre-in">look at the URL</a>.</p>
<p>If necessary, you can
<a href="../../tutorials/move_personal_project_to_group/_index.md#move-your-project-to-a-group">transfer your project to a group namespace</a>.</p>
<h2>IDE commands fail or run indefinitely</h2>
<p>When using GitLab Duo Chat (Agentic) or the Software Development flow in your IDE,
GitLab Duo can get stuck in a loop or have difficulty running commands.</p>
<p>This issue can occur when you are using shell themes or integrations, like <code>Oh My ZSH!</code> or <code>powerlevel10k</code>.
When a GitLab Duo agent spawns a terminal, a theme or integration can prevent commands from running properly.</p>
<p>As a workaround, use a simpler theme for commands sent by agents.
<a href="https://gitlab.com/gitlab-org/gitlab-vscode-extension/-/issues/2070">Issue 2070</a> tracks improvements to this behavior so this workaround is no longer needed.</p>
<h3>Edit your <code>.zshrc</code> file</h3>
<p>In VS Code and JetBrains IDEs, configure <code>Oh My ZSH!</code> or <code>powerlevel10k</code> to use a simpler
theme when it runs commands sent by an agent. You can use the environment variables exposed
by the IDEs to set these values.</p>
<p>Edit your <code>~/.zshrc</code> file to include this code:</p>
<pre><code class="language-shell"># ~/.zshrc

# Path to your oh-my-zsh installation
export ZSH=&quot;$HOME/.oh-my-zsh&quot;

# ...

# Decide whether to load a full terminal environment,
# or keep it minimal for agentic AI in IDEs
if [[ &quot;$TERM_PROGRAM&quot; == &quot;vscode&quot; || &quot;$TERMINAL_EMULATOR&quot; == &quot;JetBrains-JediTerm&quot; ]]; then
  echo &quot;IDE agentic environment detected, not loading full shell integrations&quot;
else
  # Oh My ZSH
  source $ZSH/oh-my-zsh.sh
  # Theme: Powerlevel10k
  [[ ! -f ~/.p10k.zsh ]] || source ~/.p10k.zsh
  # Other integrations like syntax highlighting
fi

# Other setup, like PATH variables
</code></pre>
<h3>Edit your Bash shell</h3>
<p>In VS Code or JetBrains IDEs, you can turn off advanced prompts in Bash, so that agents don't initiate them.
Edit your <code>~/.bashrc</code> or <code>~/.bash_profile</code> file to include this code:</p>
<pre><code class="language-shell"># ~/.bashrc or ~/.bash_profile

# Decide whether to load a full terminal environment,
# or keep it minimal for Agentic AI in IDEs
if [[ &quot;$TERM_PROGRAM&quot; == &quot;vscode&quot; || &quot;$TERMINAL_EMULATOR&quot; == &quot;JetBrains-JediTerm&quot; ]]; then
  echo &quot;IDE agentic environment detected, not loading full shell integrations&quot;

  # Keep only essential settings for agents
  export PS1='\$ '  # Minimal prompt

else
  # Load full Bash environment

  # Custom prompt (e.g., Starship, custom PS1)
  if command -v starship &amp;&gt; /dev/null; then
    eval &quot;$(starship init bash)&quot;
  else
    # ... Add your own PS1 variable
  fi

  # Load additional integrations
fi

# Always load essential environment variables and aliases
</code></pre>
<h2>Still having issues?</h2>
<p>Contact your GitLab administrator for assistance.</p></code></pre>
</body>
</html>
