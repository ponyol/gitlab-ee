<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title># Default branch file and directory locks</title>
    <link rel="stylesheet" href="/../../style.css">
</head>
<body>
    <pre><code><hr />
<p>stage: Create
group: Source Code
info: To determine the technical writer assigned to the Stage/Group associated with this page, see https://handbook.gitlab.com/handbook/product/ux/technical-writing/#assignments
title: File locking</p>
<hr />
<p>File locking prevents multiple people from editing the same file simultaneously, which helps avoid
merge conflicts. File locking is especially valuable for binary files that cannot be merged like
design files, videos, and other non-text content.</p>
<p>GitLab supports two different types of file locking:</p>
<ul>
<li>Exclusive file locks: Applied through the command line with Git LFS and
  <a href="repository/files/git_attributes.html"><code>.gitattributes</code></a>. These locks prevent modifications to
  locked files on any branch. Available on Free, Premium, and Ultimate tiers.
  For more information, see <a href="../../topics/git/file_management.md#exclusive-file-locks">Exclusive file locks</a>.</li>
<li>Default branch file and directory locks: Applied through the GitLab UI. These locks prevent
  modifications to files and directories on the default branch only.</li>
</ul>
<h2>Default branch file and directory locks</h2>
<p>{{&lt; details &gt;}}</p>
<ul>
<li>Tier: Premium, Ultimate</li>
<li>Offering: GitLab.com, GitLab Self-Managed, GitLab Dedicated</li>
</ul>
<p>{{&lt; /details &gt;}}</p>
<p>Default branch locks apply only to the <a href="repository/branches/default.html">default branch</a> set in your
project's settings. These locks help maintain stability in your default branch without blocking
collaborator workflows in other branches.</p>
<p>When a file or directory is locked by a user:</p>
<ul>
<li>Only the user who created the lock can modify the file or directory on the default branch.</li>
<li>For other users, the locked file or directory is read-only on the default branch.</li>
<li>Direct changes to locked files or directories on the default branch are blocked.</li>
<li>Merge requests that modify locked files or directories cannot be merged to the default branch.</li>
</ul>
<p>{{&lt; alert type="note" &gt;}}</p>
<p>On non-default branches, all users can still modify locked files and directories.
A <strong>Lock</strong> status is visible on these files and directories. This helps team members
to be aware of in-flight work without restricting their workflow on other branches.</p>
<p>File locking is also bypassed during fork synchronization.
When you <a href="repository/forking_workflow.md#update-your-fork">update a fork</a> from its upstream
project, locked files in the fork can be overwritten with changes from the upstream project.</p>
<p>{{&lt; /alert &gt;}}</p>
<h3>Permissions</h3>
<p>You must have at least the Developer role for the project to create, view, or manage
default branch locks. For more information, see <a href="../permissions.html">Roles and permissions</a>.</p>
<h3>Lock a file or directory</h3>
<p>{{&lt; history &gt;}}</p>
<ul>
<li><a href="https://gitlab.com/gitlab-org/gitlab/-/issues/519325">Introduced</a> in GitLab 17.10 <a href="../../administration/feature_flags/_index.html">with a flag</a> named <code>blob_overflow_menu</code>. Disabled by default.</li>
<li><a href="https://gitlab.com/gitlab-org/gitlab/-/issues/522993">Generally available</a> in GitLab 18.1. Feature flag <code>blob_overflow_menu</code> removed.</li>
</ul>
<p>{{&lt; /history &gt;}}</p>
<p>The method for locking depends on whether you're locking a file or directory:</p>
<p>{{&lt; tabs &gt;}}</p>
<p>{{&lt; tab title="Lock a directory" &gt;}}</p>
<ol>
<li>On the top bar, select <strong>Search or go to</strong> and find your project.</li>
<li>Go to the directory you want to lock.</li>
<li>In the upper-right corner, select <strong>Lock</strong>.</li>
<li>In the confirmation dialog, select <strong>OK</strong>.</li>
</ol>
<p>To view the user who locked the directory, hover over the <strong>Lock</strong> icon.</p>
<p>{{&lt; /tab &gt;}}</p>
<p>{{&lt; tab title="Lock a file" &gt;}}</p>
<ol>
<li>On the top bar, select <strong>Search or go to</strong> and find your project.</li>
<li>Go to the file you want to lock.</li>
<li>In the upper-right corner, next to the filename, select <strong>Actions</strong> ({{&lt; icon name="ellipsis_v" &gt;}}) &gt; <strong>Lock</strong>.</li>
<li>In the confirmation dialog, select <strong>OK</strong>.</li>
</ol>
<p>{{&lt; /tab &gt;}}</p>
<p>{{&lt; /tabs &gt;}}</p>
<p>If the lock option is not available or is disabled, you don't have the required permissions to lock the file or directory.</p>
<h3>View locked files</h3>
<p>To view locked files:</p>
<ol>
<li>On the top bar, select <strong>Search or go to</strong> and find your project.</li>
<li>Select <strong>Code</strong> &gt; <strong>Locked files</strong>.</li>
</ol>
<p>The <strong>Locked files</strong> page displays all files locked with either Git LFS exclusive locks or the GitLab UI.</p>
<h3>Remove file locks</h3>
<p>Prerequisites:</p>
<ul>
<li>You must either:</li>
<li>Be the user who created the lock.</li>
<li>Have at least the Maintainer role for the project.</li>
</ul>
<p>To remove a lock:</p>
<p>{{&lt; tabs &gt;}}</p>
<p>{{&lt; tab title="From a file" &gt;}}</p>
<ol>
<li>On the top bar, select <strong>Search or go to</strong> and find your project.</li>
<li>Go to the file you want to unlock.</li>
<li>Select <strong>Unlock</strong>.</li>
<li>On the confirmation dialog, select <strong>Unlock</strong>.</li>
</ol>
<p>{{&lt; /tab &gt;}}</p>
<p>{{&lt; tab title="From the Locked file page" &gt;}}</p>
<ol>
<li>On the top bar, select <strong>Search or go to</strong> and find your project.</li>
<li>Select <strong>Code</strong> &gt; <strong>Locked files</strong>.</li>
<li>To the right of the file you want to unlock, select <strong>Unlock</strong>.</li>
<li>On the confirmation dialog, select <strong>OK</strong>.</li>
</ol>
<p>{{&lt; /tab &gt;}}</p>
<p>{{&lt; /tabs &gt;}}</p>
<p>To remove an exclusive file lock, see
<a href="../../topics/git/file_management.md#lock-and-unlock-files">Lock and unlock files</a>.</p>
<h2>Merge request checks and lock ownership</h2>
<p>When a merge request, that includes changes to locked files or directories, is set to merge,
GitLab checks if the merge request author is the lock owner.
GitLab does not check individual commit authors.</p>
<p>For example:</p>
<ul>
<li>If the merge request author is the same user who locked the file or directory, the merge
  request can be merged.</li>
<li>If the merge request author is different from the lock owner, the merge request is blocked.</li>
</ul>
<p>{{&lt; alert type="note" &gt;}}</p>
<p>Users other than the merge request author can push changes to the merge request branch that
update or change locked files or directories. The lock check only considers the merge request
author, so the merge request is not blocked.</p>
<p>{{&lt; /alert &gt;}}</p>
<p>To prevent unauthorized changes to locked files:</p>
<ul>
<li>Use <a href="merge_requests/approvals/rules.html">merge request approval rules</a> that require review before merging.</li>
<li>Monitor merge requests to locked files to ensure only authorized changes are included.</li>
<li>Consider who has permission to push to existing merge request branches in your workflow.</li>
</ul>
<h2>Related topics</h2>
<ul>
<li><a href="../../topics/git/file_management.md#exclusive-file-locks">Exclusive file locks</a></li>
</ul></code></pre>
</body>
</html>
