<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title># Error: `Server's protocol version is not supported: 2025-06-18`</title>
    <link rel="stylesheet" href="/../../../style.css">
</head>
<body>
    <pre><code><hr />
<p>stage: AI-powered
group: AI Framework
info: To determine the technical writer assigned to the Stage/Group associated with this page, see https://handbook.gitlab.com/handbook/product/ux/technical-writing/#assignments
description: Troubleshoot common issues with the GitLab MCP server.
title: Troubleshooting the GitLab MCP server</p>
<hr />
<p>{{&lt; details &gt;}}</p>
<ul>
<li>Tier: Premium, Ultimate</li>
<li>Add-on: GitLab Duo Core, Pro, or Enterprise</li>
<li>Offering: GitLab.com, GitLab Self-Managed, GitLab Dedicated</li>
<li>Status: Beta</li>
</ul>
<p>{{&lt; /details &gt;}}</p>
<p>When working with GitLab MCP server, you might encounter the following issues.</p>
<h2>Error: <code>Server's protocol version is not supported: 2025-06-18</code></h2>
<p>In GitLab 18.6 and earlier, you might get this error when the MCP client library
does not support the GitLab MCP server protocol specification.</p>
<p>To resolve this issue, ask the AI tool provider
to update their client implementation.</p>
<h2>Troubleshoot the GitLab MCP Server in Cursor</h2>
<ol>
<li>In Cursor, to open the Output view, do one of the following:</li>
<li>Go to <strong>View</strong> &gt; <strong>Output</strong>.</li>
<li>In macOS, press <kbd>Command</kbd>+<kbd>Shift</kbd>+<kbd>U</kbd>.</li>
<li>In Windows or Linux, press <kbd>Control</kbd>+<kbd>Shift</kbd>+<kbd>U</kbd>.</li>
<li>In the Output view, select <strong>MCP:SERVERNAME</strong>. The name depends on the MCP configuration value. The example with <code>GitLab</code> results in <code>MCP: user-GitLab</code>.</li>
<li>When reporting bugs, copy the output into the issue template logs section.</li>
</ol>
<h2>Troubleshoot the GitLab MCP Server on the CLI with mcp-remote</h2>
<ol>
<li>
<p>Install <a href="https://nodejs.org/en/download">Node.js</a> version 20 or later.</p>
</li>
<li>
<p>To test the exact same command as the IDEs and desktop clients:</p>
</li>
<li>Extract the MCP configuration.</li>
<li>Assemble the <code>npx</code> command string into one line.</li>
<li>Run the command string.</li>
</ol>
<p>```shell
   rm -rf ~/.mcp-auth/mcp-remote*</p>
<p>npx -y mcp-remote@latest https://gitlab.example.com/api/v4/mcp --static-oauth-client-metadata '{"scope": "mcp"}'
   ```</p>
<ol>
<li>Add the <code>--debug</code> parameter to log more verbose output:</li>
</ol>
<p>```shell
   rm -rf ~/.mcp-auth/mcp-remote*</p>
<p>npx -y mcp-remote@latest https://gitlab.example.com/api/v4/mcp --static-oauth-client-metadata '{"scope": "mcp"}' --debug
   ```</p>
<ol>
<li>Optional. Run the <code>mcp-remote-client</code> executable directly.</li>
</ol>
<p>```shell
   rm -rf ~/.mcp-auth/mcp-remote*</p>
<p>npx -p mcp-remote@latest mcp-remote-client https://gitlab.example.com/api/v4/mcp --static-oauth-client-metadata '{"scope": "mcp"}'
   ```</p>
<ol>
<li>Optional. If you encounter version-specific bugs, pin the version of the <code>mcp-remote</code> module to a specific version. For example, use <code>mcp-remote@0.1.26</code> to pin the version to <code>0.1.26</code>.</li>
</ol>
<p>{{&lt; alert type="note" &gt;}}</p>
<p>For security reasons, you should not pin versions if possible.</p>
<p>{{&lt; /alert &gt;}}</p>
<h2>Troubleshoot GitLab MCP Server with Claude Desktop</h2>
<p>Verify the installed <a href="https://nodejs.org/en/download">Node.js</a> versions. Claude Desktop requires Node.js version 20 or later.</p>
<pre><code class="language-shell">for n in $(which -a node); do echo &quot;$n&quot; &amp;&amp; $n -v; done
</code></pre>
<h2>Delete MCP authentication caches</h2>
<p>The MCP authentication is heavily cached locally. While troubleshooting, you might encounter false positives. To prevent these, delete the cache directory during troubleshooting:</p>
<pre><code class="language-shell">rm -rf ~/.mcp-auth/mcp-remote*
</code></pre>
<h2>Debugging and development tools</h2>
<p><a href="https://modelcontextprotocol.io/legacy/tools/inspector">MCP Inspector</a> is an interactive
developer tool for testing and debugging MCP servers. To run this tool, use the command
line and access the web interface to inspect the GitLab MCP Server.</p>
<pre><code class="language-shell">npx -y @modelcontextprotocol/inspector npx
</code></pre></code></pre>
</body>
</html>
