<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title># Create job artifacts</title>
    <link rel="stylesheet" href="../../style.css">
</head>
<body>
    <pre><code><hr />
<p>stage: Verify
group: Pipeline Execution
info: To determine the technical writer assigned to the Stage/Group associated with this page, see https://handbook.gitlab.com/handbook/product/ux/technical-writing/#assignments
title: Job artifacts</p>
<hr />
<p>{{&lt; details &gt;}}</p>
<ul>
<li>Tier: Free, Premium, Ultimate</li>
<li>Offering: GitLab.com, GitLab Self-Managed, GitLab Dedicated</li>
</ul>
<p>{{&lt; /details &gt;}}</p>
<p>Jobs can output an archive of files and directories. This output is known as a job artifact.
Artifacts can include build output or report files. By default, later jobs fetch a copy of
all artifacts from jobs in earlier stages.</p>
<p>For example, an early job can build a project and save the output as an artifact.
Then a later job fetches the artifact and runs tests on the saved build output.</p>
<p>For a full list of supported configuration for the <code>artifacts</code> keyword,
see the <a href="../yaml/_index.md#artifacts">GitLab CI/CD YAML syntax reference</a>.</p>
<p>Related topics:</p>
<ul>
<li><a href="../../api/job_artifacts.html">Job artifacts API</a></li>
<li><a href="../../administration/cicd/job_artifacts.html">Job artifacts administration</a></li>
</ul>
<h2>Create job artifacts</h2>
<p>To create job artifacts, use the <code>artifacts</code> keyword in your <code>.gitlab-ci.yml</code> file:</p>
<pre><code class="language-yaml">pdf:
  script: xelatex mycv.tex
  artifacts:
    paths:
      - mycv.pdf
</code></pre>
<p>In this example, a job named <code>pdf</code> calls the <code>xelatex</code> command to build a PDF file from the
LaTeX source file, <code>mycv.tex</code>.</p>
<p>The <code>paths</code> keyword determines which files to add to the job artifacts.
All paths to files and directories are relative to the repository where the job was created.</p>
<h3>With wildcards</h3>
<p>You can use wildcards for paths and directories. For example, to create an artifact
with all the files inside the directories that end with <code>xyz</code>:</p>
<pre><code class="language-yaml">job:
  script: echo &quot;build xyz project&quot;
  artifacts:
    paths:
      - path/*xyz/*
</code></pre>
<h3>With an expiry</h3>
<p>The <code>expire_in</code> keyword determines how long GitLab keeps the artifacts defined in <code>artifacts:paths</code>. For example:</p>
<pre><code class="language-yaml">pdf:
  script: xelatex mycv.tex
  artifacts:
    paths:
      - mycv.pdf
    expire_in: 1 week
</code></pre>
<p>If <code>expire_in</code> is not defined, the <a href="../../administration/settings/continuous_integration.md#set-default-artifacts-expiration"><strong>Default artifacts expiration</strong></a>
instance setting is used.</p>
<p>To prevent artifacts from expiring, you can select <strong>Keep</strong> from the job details page.
The option is not available when an artifact has no expiry set.</p>
<p>By default, artifacts are always kept for the most recent successful pipeline on each ref.</p>
<h3>With an explicitly defined artifact name</h3>
<p>You can explicitly customize artifact names using the <code>artifacts:name</code> configuration:</p>
<pre><code class="language-yaml">job:
  artifacts:
    name: &quot;job1-artifacts-file&quot;
    paths:
      - binaries/
</code></pre>
<h3>Without excluded files</h3>
<p>Use <code>artifacts:exclude</code> to prevent files from being added to an artifacts archive.</p>
<p>For example, to store all files in <code>binaries/</code>, but not <code>*.o</code> files located in
subdirectories of <code>binaries/</code>:</p>
<pre><code class="language-yaml">artifacts:
  paths:
    - binaries/
  exclude:
    - binaries/**/*.o
</code></pre>
<p>Unlike <code>artifacts:paths</code>, <code>exclude</code> paths are not recursive. To exclude all of the contents
of a directory, match them explicitly rather than matching the directory itself.</p>
<p>For example, to store all files in <code>binaries/</code> but nothing located in the <code>temp/</code> subdirectory:</p>
<pre><code class="language-yaml">artifacts:
  paths:
    - binaries/
  exclude:
    - binaries/temp/**/*
</code></pre>
<h3>With untracked files</h3>
<p>Use <code>artifacts:untracked</code> to add all Git untracked files as artifacts along with the paths
defined in <code>artifacts:paths</code>. Untracked files are those that haven't been added to the
repository but exist in the repository checkout.</p>
<p>For example, to save all Git untracked files and files in <code>binaries</code>:</p>
<pre><code class="language-yaml">artifacts:
  untracked: true
  paths:
    - binaries/
</code></pre>
<p>For example, to save all untracked files but exclude <code>*.txt</code> files:</p>
<pre><code class="language-yaml">artifacts:
  untracked: true
  exclude:
    - &quot;*.txt&quot;
</code></pre>
<h3>With variable expansion</h3>
<p>Variable expansion is supported for <code>artifacts:name</code>, <code>artifacts:paths</code>, and <code>artifacts:exclude</code>.</p>
<p>Instead of using shell, GitLab Runner uses its internal variable expansion mechanism.
Only CI/CD variables are supported in this context.</p>
<p>For example, to create an archive using the current branch or tag name
including only files from a directory named after the current project:</p>
<pre><code class="language-yaml">job:
  artifacts:
    name: &quot;$CI_COMMIT_REF_NAME&quot;
    paths:
      - binaries/${CI_PROJECT_NAME}/
</code></pre>
<p>When your branch name contains forward slashes (for example, <code>feature/my-feature</code>),
use <code>$CI_COMMIT_REF_SLUG</code> instead of <code>$CI_COMMIT_REF_NAME</code> to ensure proper artifact naming.</p>
<p>Variables are expanded before globs.</p>
<h2>Fetching artifacts</h2>
<p>By default, jobs fetch all artifacts from jobs defined in previous stages. These artifacts
are downloaded into the job's working directory.</p>
<p>You can control which artifacts to download by using the <code>dependencies</code> or <code>needs:artifacts</code> keywords.</p>
<p>When you use these keywords, the default behavior changes and artifacts are fetched from
only the jobs you specify.</p>
<h3>Prevent a job from fetching artifacts</h3>
<p>To prevent a job from downloading any artifacts, set <code>dependencies</code> to an empty array (<code>[]</code>):</p>
<pre><code class="language-yaml">job:
  stage: test
  script: make build
  dependencies: []
</code></pre>
<h2>View all job artifacts in a project</h2>
<p>{{&lt; history &gt;}}</p>
<ul>
<li><a href="https://gitlab.com/gitlab-org/gitlab/-/issues/407475">Generally available</a> in GitLab 16.0. Feature flag <code>artifacts_management_page</code> removed.</li>
</ul>
<p>{{&lt; /history &gt;}}</p>
<p>You can view all artifacts stored in a project from the <strong>Build</strong> &gt; <strong>Artifacts</strong> page.
This list displays all jobs and their associated artifacts. Expand an entry to access
all artifacts associated with a job, including:</p>
<ul>
<li>Artifacts created with the <code>artifacts:</code> keyword.</li>
<li>Report artifacts.</li>
<li>Job logs and metadata, which are stored internally as separate artifacts.</li>
</ul>
<p>You can download or delete individual artifacts from this list.</p>
<h2>Download job artifacts</h2>
<p>You can download job artifacts by using the GitLab UI or the API.</p>
<p>From the GitLab UI, you can download job artifacts from:</p>
<ul>
<li>Any <strong>Pipelines</strong> list. On the right of the pipeline, select <strong>Download artifacts</strong> ({{&lt; icon name="download" &gt;}}).</li>
<li>Any <strong>Jobs</strong> list. On the right of the job, select <strong>Download artifacts</strong> ({{&lt; icon name="download" &gt;}}).</li>
<li>A job's detail page. On the right of the page, select <strong>Download</strong>.</li>
<li>A merge request <strong>Overview</strong> page. On the right of the latest pipeline, select <strong>Artifacts</strong> ({{&lt; icon name="download" &gt;}}).</li>
<li>The <strong>Artifacts</strong> page. On the right of the job, select <strong>Download</strong> ({{&lt; icon name="download" &gt;}}).</li>
<li>The artifacts browser. On the top of the page, select <strong>Download artifacts archive</strong> ({{&lt; icon name="download" &gt;}}).</li>
</ul>
<p><a href="../yaml/artifacts_reports.html">Report artifacts</a> can only be downloaded from the <strong>Pipelines</strong> list
or <strong>Artifacts</strong> page.</p>
<h3>From a URL</h3>
<p>You can download the artifacts archive for a specific job with a publicly accessible URL.</p>
<p>For example, to download the latest artifacts of a job named <code>build</code> in the <code>main</code> branch
of a project on GitLab.com:</p>
<pre><code class="language-plaintext">https://gitlab.com/api/v4/projects/&lt;project-id&gt;/jobs/artifacts/main/download?job=build
</code></pre>
<p>To download a specific file from the artifacts:</p>
<pre><code class="language-plaintext">https://gitlab.com/api/v4/projects/&lt;project-id&gt;/jobs/artifacts/main/raw/review/index.html?job=build
</code></pre>
<p>Files returned by this endpoint always have the <code>plain/text</code> content type.</p>
<p>In both examples, replace <code>&lt;project-id&gt;</code> with a valid project ID. You can find the project ID
on the <a href="../../user/project/working_with_projects.md#find-the-project-id">project overview page</a>.</p>
<p>Artifacts for parent and child pipelines are searched in hierarchical order from parent to child.
For example, if both parent and child pipelines have a job with the same name, the job artifacts
from the parent pipeline are returned.</p>
<h3>With a CI/CD job token</h3>
<p>{{&lt; details &gt;}}</p>
<ul>
<li>Tier: Premium, Ultimate</li>
<li>Offering: GitLab.com, GitLab Self-Managed, GitLab Dedicated</li>
</ul>
<p>{{&lt; /details &gt;}}</p>
<p>You can use a CI/CD job token to authenticate with the jobs artifacts API endpoint
and fetch artifacts from a different pipeline. You must specify which job to retrieve
artifacts from, for example:</p>
<pre><code class="language-yaml">build_submodule:
  stage: test
  script:
    - apt update &amp;&amp; apt install -y unzip
    - curl --location --output artifacts.zip &quot;https://gitlab.example.com/api/v4/projects/1/jobs/artifacts/main/download?job=test&amp;job_token=$CI_JOB_TOKEN&quot;
    - unzip artifacts.zip
</code></pre>
<p>To fetch artifacts from a job in the same pipeline, use the <code>needs:artifacts</code> keyword.</p>
<h3>Control who can download artifacts</h3>
<p>To restrict who can download job artifacts, use the <code>artifacts:access</code> keyword in your <code>.gitlab-ci.yml</code> file. For example:</p>
<pre><code class="language-yaml">job:
  artifacts:
    access: maintainer
    paths:
      - build/
</code></pre>
<h2>Browse the contents of the artifacts archive</h2>
<p>You can browse the contents of the artifacts from the UI without downloading the artifact locally,
from:</p>
<ul>
<li>Any <strong>Jobs</strong> list. On the right of the job, select <strong>Browse</strong> ({{&lt; icon name="folder-open" &gt;}}).</li>
<li>A job's detail page. On the right of the page, select <strong>Browse</strong>.</li>
<li>The <strong>Artifacts</strong> page. On the right of the job, select <strong>Browse</strong> ({{&lt; icon name="folder-open" &gt;}}).</li>
</ul>
<p>If GitLab Pages is enabled globally, even if it is disabled in the project settings,
you can preview some artifacts file extensions directly in your browser. If the project
is internal or private, you must enable GitLab Pages access control to enable the preview.</p>
<p>The following extensions are supported:</p>
<table>
<thead>
<tr>
<th>File extension</th>
<th>GitLab.com</th>
<th>Linux package with built-in NGINX</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>.html</code></td>
<td>{{&lt; yes &gt;}}</td>
<td>{{&lt; yes &gt;}}</td>
</tr>
<tr>
<td><code>.json</code></td>
<td>{{&lt; yes &gt;}}</td>
<td>{{&lt; yes &gt;}}</td>
</tr>
<tr>
<td><code>.xml</code></td>
<td>{{&lt; yes &gt;}}</td>
<td>{{&lt; yes &gt;}}</td>
</tr>
<tr>
<td><code>.txt</code></td>
<td>{{&lt; no &gt;}}</td>
<td>{{&lt; yes &gt;}}</td>
</tr>
<tr>
<td><code>.log</code></td>
<td>{{&lt; no &gt;}}</td>
<td>{{&lt; yes &gt;}}</td>
</tr>
</tbody>
</table>
<h3>From a URL</h3>
<p>You can browse the job artifacts of the latest successful pipeline for a specific job
with a publicly accessible URL.</p>
<p>For example, to browse the latest artifacts of a job named <code>build</code> in the <code>main</code> branch
of a project on GitLab.com:</p>
<pre><code class="language-plaintext">https://gitlab.com/&lt;full-project-path&gt;/-/jobs/artifacts/main/browse?job=build
</code></pre>
<p>Replace <code>&lt;full-project-path&gt;</code> with a valid project path, you can find it in the URL for your project.</p>
<h2>Delete job log and artifacts</h2>
<p>{{&lt; alert type="warning" &gt;}}</p>
<p>Deleting the job log and artifacts is a destructive action that cannot be reverted. Use with caution.
Deleting certain files, including report artifacts, job logs, and metadata files, affects
GitLab features that use these files as data sources.</p>
<p>{{&lt; /alert &gt;}}</p>
<p>You can delete a job's artifacts and log.</p>
<p>Prerequisites:</p>
<ul>
<li>You must be the owner of the job or a user with at least the Maintainer role for the project.</li>
</ul>
<p>To delete a job:</p>
<ol>
<li>Go to a job's detail page.</li>
<li>In the upper-right corner of the job's log, select <strong>Erase job log and artifacts</strong> ({{&lt; icon name="remove" &gt;}}).</li>
</ol>
<p>You can also delete individual artifacts from the <strong>Artifacts</strong> page.</p>
<h3>Bulk delete artifacts</h3>
<p>{{&lt; history &gt;}}</p>
<ul>
<li><a href="https://gitlab.com/gitlab-org/gitlab/-/issues/33348">Introduced</a> in GitLab 15.10 <a href="../../administration/feature_flags/_index.html">with a flag</a> named <code>ci_job_artifact_bulk_destroy</code>. Disabled by default.</li>
<li><a href="https://gitlab.com/gitlab-org/gitlab/-/issues/398581">Generally available</a> in GitLab 16.1. Feature flag <code>ci_job_artifact_bulk_destroy</code> removed.</li>
</ul>
<p>{{&lt; /history &gt;}}</p>
<p>You can delete multiple artifacts at the same time:</p>
<ol>
<li>On the top bar, select <strong>Search or go to</strong> and find your project.</li>
<li>Select <strong>Build</strong> &gt; <strong>Artifacts</strong>.</li>
<li>Select the checkboxes next to the artifacts you want to delete. You can select up to 100 artifacts.</li>
<li>Select <strong>Delete selected</strong>.</li>
</ol>
<h2>Link to job artifacts in the merge request UI</h2>
<p>Use the <code>artifacts:expose_as</code> keyword to provide direct access to artifacts from the merge request UI.</p>
<p>For example, for an artifact with a single file:</p>
<pre><code class="language-yaml">test:
  script: [&quot;echo 'test' &gt; file.txt&quot;]
  artifacts:
    expose_as: 'artifact 1'
    paths: ['file.txt']
</code></pre>
<p>With this configuration, the <strong>View exposed artifact</strong> section displays a link to <code>file.txt</code> labeled <strong>artifact 1</strong>.</p>
<p><img alt="A merge request widget that links to exposed artifacts." src="img/mr_artifact_expose_v18_4.png" /></p>
<h2>Keep artifacts from most recent successful jobs</h2>
<p>{{&lt; history &gt;}}</p>
<ul>
<li>Artifacts for <a href="https://gitlab.com/gitlab-org/gitlab/-/issues/387087">blocked</a> or <a href="https://gitlab.com/gitlab-org/gitlab/-/issues/266958">failed</a> pipelines changed to no longer be kept indefinitely in GitLab 16.7.</li>
</ul>
<p>{{&lt; /history &gt;}}</p>
<p>By default, artifacts are always kept for the most recent successful pipeline on each ref.
Any <code>expire_in</code> configuration does not apply to the most recent artifacts.</p>
<p>When a new pipeline on the same ref completes successfully, the previous pipeline's artifacts
are deleted according to the <code>expire_in</code> configuration. The artifacts of the new pipeline
are kept automatically.</p>
<p>A pipeline's artifacts are only deleted according to the <code>expire_in</code> configuration if a
new pipeline runs for the same ref and:</p>
<ul>
<li>Succeeds.</li>
<li>Stops running due to being blocked by a manual job.</li>
</ul>
<p>Keeping the latest artifacts can use a large amount of storage space in projects
with a lot of jobs or large artifacts. If the latest artifacts are not needed in
a project, you can disable this behavior to save space:</p>
<ol>
<li>On the top bar, select <strong>Search or go to</strong> and find your project.</li>
<li>Select <strong>Settings</strong> &gt; <strong>CI/CD</strong>.</li>
<li>Expand <strong>Artifacts</strong>.</li>
<li>Clear the <strong>Keep artifacts from most recent successful jobs</strong> checkbox.</li>
</ol>
<p>After disabling this setting, all new artifacts expire according to the <code>expire_in</code> configuration.
Artifacts in old pipelines continue to be kept until a new pipeline runs for the same ref.
Then the artifacts in the earlier pipeline for that ref are allowed to expire too.</p>
<p>You can disable this behavior for all projects on GitLab Self-Managed with the
<a href="../../administration/settings/continuous_integration.md#keep-artifacts-from-latest-successful-pipelines"><strong>Keep artifacts from latest successful pipelines</strong></a> instance setting.</p>
<p>You can disable this behavior for all projects on GitLab Self-Managed in the
<a href="../../administration/settings/continuous_integration.md#keep-artifacts-from-latest-successful-pipelines">instance's CI/CD settings</a>.</p></code></pre>
</body>
</html>
