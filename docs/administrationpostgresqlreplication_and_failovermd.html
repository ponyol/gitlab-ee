<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üìÑ administration/postgresql/replication_and_failover.md</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <pre><code><p><strong>1. –ó–∞—á–µ–º —ç—Ç–æ –Ω—É–∂–Ω–æ</strong><br />
–ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Ä–µ–ø–ª–∏–∫–∞—Ü–∏–∏ –∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –ø–µ—Ä–µ—Ö–æ–¥–∞ –Ω–∞ —Ä–µ–∑–µ—Ä–≤–Ω—ã–π —É–∑–µ–ª –≤ PostgreSQL –ø–æ–∑–≤–æ–ª—è–µ—Ç –æ–±–µ—Å–ø–µ—á–∏—Ç—å –≤—ã—Å–æ–∫—É—é –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å –∏ –æ—Ç–∫–∞–∑–æ—É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç—å –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö –≤ —Å—Ä–µ–¥–µ GitLab Self-Managed, –º–∏–Ω–∏–º–∏–∑–∏—Ä—É—è –ø—Ä–æ—Å—Ç–æ–∏ –ø—Ä–∏ —Å–±–æ—è—Ö –æ—Å–Ω–æ–≤–Ω–æ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞.</p>
<p><strong>2. –û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏</strong>
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Ä–µ–ø–ª–∏–∫–∞—Ü–∏–∏ PostgreSQL —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º Patroni.
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ø–µ—Ä–µ—Ö–æ–¥ –Ω–∞ –Ω–æ–≤—ã–π –ª–∏–¥–µ—Ä –∫–ª–∞—Å—Ç–µ—Ä–∞ –ø—Ä–∏ –æ—Ç–∫–∞–∑–µ —Ç–µ–∫—É—â–µ–≥–æ.
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å PgBouncer –¥–ª—è –±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∫–∏ –Ω–∞–≥—Ä—É–∑–∫–∏ –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è–º–∏.
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ Consul –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏—è —É–∑–ª–æ–≤ –∏ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ü–∏–∏ Failover.
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –Ω–∞–≥—Ä—É–∑–∫–∏ –Ω–∞ —á—Ç–µ–Ω–∏–µ —á–µ—Ä–µ–∑ <a href="database_load_balancing.html">Database Load Balancing</a>.
- –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏—è –∫–ª–∞—Å—Ç–µ—Ä–∞ —Å –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º —É–∑–ª–æ–≤ ‚Äî 3 PostgreSQL-—É–∑–ª–∞, 3 Consul-—Å–µ—Ä–≤–µ—Ä–∞ –∏ 3 PgBouncer-—É–∑–ª–∞.</p>
<p><strong>3. –í–∞–∂–Ω—ã–µ –Ω—é–∞–Ω—Å—ã</strong>
- –¢—Ä–µ–±—É–µ—Ç—Å—è –º–∏–Ω–∏–º—É–º 3 —É–∑–ª–∞ –¥–ª—è PostgreSQL, Consul –∏ PgBouncer.
- –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –≤ —Ç–∞—Ä–≥–µ—Ç–∞—Ö Premium –∏ Ultimate.
- –ù–µ–æ–±—Ö–æ–¥–∏–º–æ —Å–æ–±–ª—é–¥–∞—Ç—å —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ —Å–µ—Ç–µ–≤–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–µ: –∏–∑–±–µ–≥–∞—Ç—å –µ–¥–∏–Ω–æ–π —Ç–æ—á–∫–∏ –æ—Ç–∫–∞–∑–∞ –≤ —Å–µ—Ç–∏.
- –î–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–π —Ä–∞–±–æ—Ç—ã —Ç—Ä–µ–±—É–µ—Ç—Å—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–∞—Ä–æ–ª–µ–π –∏ —Ö—ç—à–µ–π —á–µ—Ä–µ–∑ <code>pg-password-md5</code>.
- –ù–µ–ª—å–∑—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å <code>127.0.0.1</code> –≤ –∫–∞—á–µ—Å—Ç–≤–µ –∞–¥—Ä–µ—Å–∞ –ø—Ä–æ—Å–ª—É—à–∏–≤–∞–Ω–∏—è PostgreSQL.
- –í–∞–∂–Ω–æ —É—á–∏—Ç—ã–≤–∞—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è –ø—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ –æ–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã ‚Äî —Å–º. <a href="upgrading_os.html">–¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é –ø–æ –º–∏–≥—Ä–∞—Ü–∏–∏ –û–°</a>.
- –î–ª—è —Ä–∞–±–æ—Ç—ã —Ç—Ä–µ–±—É–µ—Ç—Å—è –æ—Ç–∫–ª—é—á–∏—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –º–∏–≥—Ä–∞—Ü–∏–∏ (<code>gitlab_rails['auto_migrate'] = false</code>).</p>
<hr /></code></pre>
</body>
</html>
